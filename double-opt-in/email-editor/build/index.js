(()=>{"use strict";var e={162(e,t,n){var r=n(609),o=n(888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=o.useSyncExternalStore,i=r.useRef,s=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=c(function(){function e(e){if(!s){if(s=!0,l=e,e=r(e),void 0!==o&&m.hasValue){var t=m.value;if(o(t,e))return i=t}return i=e}if(t=i,a(l,e))return t;var n=r(e);return void 0!==o&&o(t,n)?(l=e,t):(l=e,i=n)}var l,i,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,o]);var p=l(e,u[0],u[1]);return s(function(){m.hasValue=!0,m.value=p},[p]),d(p),p}},242(e,t,n){e.exports=n(162)},338(e,t,n){var r=n(795);t.H=r.createRoot,r.hydrateRoot},493(e,t,n){var r=n(609),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,l=r.useEffect,i=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),o=r[0].inst,d=r[1];return i(function(){o.value=n,o.getSnapshot=t,c(o)&&d({inst:o})},[e,n,t]),l(function(){return c(o)&&d({inst:o}),e(function(){c(o)&&d({inst:o})})},[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},609(e){e.exports=window.React},795(e){e.exports=window.ReactDOM},888(e,t,n){e.exports=n(493)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(609),o=n.n(r),a=n(338),l=n(795);const i="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function s(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function c(e){return"nodeType"in e}function d(e){var t,n;return e?s(e)?e:c(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function u(e){const{Document:t}=d(e);return e instanceof t}function m(e){return!s(e)&&e instanceof d(e).HTMLElement}function p(e){return e instanceof d(e).SVGElement}function g(e){return e?s(e)?e.document:c(e)?u(e)?e:m(e)||p(e)?e.ownerDocument:document:document:document}const h=i?r.useLayoutEffect:r.useEffect;function v(e){const t=(0,r.useRef)(e);return h(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function b(e,t){void 0===t&&(t=[e]);const n=(0,r.useRef)(e);return h(()=>{n.current!==e&&(n.current=e)},t),n}function f(e,t){const n=(0,r.useRef)();return(0,r.useMemo)(()=>{const t=e(n.current);return n.current=t,t},[...t])}function y(e){const t=v(e),n=(0,r.useRef)(null),o=(0,r.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,o]}function E(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let k={};function x(e,t){return(0,r.useMemo)(()=>{if(t)return t;const n=null==k[e]?0:k[e]+1;return k[e]=n,e+"-"+n},[e,t])}function C(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[n,o]of r){const r=t[n];null!=r&&(t[n]=r+e*o)}return t},{...t})}}const w=C(1),N=C(-1);function S(e){if(!e)return!1;const{KeyboardEvent:t}=d(e.target);return t&&e instanceof t}function L(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=d(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const M=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[M.Translate.toString(e),M.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),D="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function R(e){return e.matches(D)?e:e.querySelector(D)}const T={display:"none"};function I(e){let{id:t,value:n}=e;return o().createElement("div",{id:t,style:T},n)}function B(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return o().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const A=(0,r.createContext)(null),$={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},O={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function z(e){let{announcements:t=O,container:n,hiddenTextDescribedById:a,screenReaderInstructions:i=$}=e;const{announce:s,announcement:c}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=x("DndLiveRegion"),[u,m]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{m(!0)},[]),function(e){const t=(0,r.useContext)(A);(0,r.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,r.useMemo)(()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&s(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;s(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;s(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;s(t.onDragCancel({active:n,over:r}))}}),[s,t])),!u)return null;const p=o().createElement(o().Fragment,null,o().createElement(I,{id:a,value:i.draggable}),o().createElement(B,{id:d,announcement:c}));return n?(0,l.createPortal)(p,n):p}var P;function W(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(P||(P={}));const j=Object.freeze({x:0,y:0});function H(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function F(e,t){const n=L(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function U(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function _(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function V(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const Y=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=V(t,t.left,t.top),a=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=H(V(r),o);a.push({id:t,data:{droppableContainer:e,value:n}})}}return a.sort(U)};function X(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=o-r,i=a-n;if(r<o&&n<a){const n=t.width*t.height,r=e.width*e.height,o=l*i;return Number((o/(n+r-o)).toFixed(4))}return 0}const K=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const e of r){const{id:r}=e,a=n.get(r);if(a){const n=X(a,t);n>0&&o.push({id:r,data:{droppableContainer:e,value:n}})}}return o.sort(_)};function J(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:j}function q(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}const G=q(1);function Z(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Q={ignoreTransform:!1};function ee(e,t){void 0===t&&(t=Q);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=d(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=Z(t);if(!r)return e;const{scaleX:o,scaleY:a,x:l,y:i}=r,s=e.left-l-(1-o)*parseFloat(n),c=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=o?e.width/o:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:s+d,bottom:c+u,left:s}}(n,t,r))}const{top:r,left:o,width:a,height:l,bottom:i,right:s}=n;return{top:r,left:o,width:a,height:l,bottom:i,right:s}}function te(e){return ee(e,{ignoreTransform:!0})}function ne(e,t){const n=[];return e?function r(o){if(null!=t&&n.length>=t)return n;if(!o)return n;if(u(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!m(o)||p(o))return n;if(n.includes(o))return n;const a=d(e).getComputedStyle(o);return o!==e&&function(e,t){void 0===t&&(t=d(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"==typeof r&&n.test(r)})}(o,a)&&n.push(o),function(e,t){return void 0===t&&(t=d(e).getComputedStyle(e)),"fixed"===t.position}(o,a)?n:r(o.parentNode)}(e):n}function re(e){const[t]=ne(e,1);return null!=t?t:null}function oe(e){return i&&e?s(e)?e:c(e)?u(e)||e===g(e).scrollingElement?window:m(e)?e:null:null:null}function ae(e){return s(e)?e.scrollX:e.scrollLeft}function le(e){return s(e)?e.scrollY:e.scrollTop}function ie(e){return{x:ae(e),y:le(e)}}var se;function ce(e){return!(!i||!e)&&e===document.scrollingElement}function de(e){const t={x:0,y:0},n=ce(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(se||(se={}));const ue={x:.2,y:.2};function me(e,t,n,r,o){let{top:a,left:l,right:i,bottom:s}=n;void 0===r&&(r=10),void 0===o&&(o=ue);const{isTop:c,isBottom:d,isLeft:u,isRight:m}=de(e),p={x:0,y:0},g={x:0,y:0},h=t.height*o.y,v=t.width*o.x;return!c&&a<=t.top+h?(p.y=se.Backward,g.y=r*Math.abs((t.top+h-a)/h)):!d&&s>=t.bottom-h&&(p.y=se.Forward,g.y=r*Math.abs((t.bottom-h-s)/h)),!m&&i>=t.right-v?(p.x=se.Forward,g.x=r*Math.abs((t.right-v-i)/v)):!u&&l<=t.left+v&&(p.x=se.Backward,g.x=r*Math.abs((t.left+v-l)/v)),{direction:p,speed:g}}function pe(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function ge(e){return e.reduce((e,t)=>w(e,ie(t)),j)}function he(e,t){if(void 0===t&&(t=ee),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);re(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ve=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ae(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+le(t),0)}]];class be{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=ne(t),r=ge(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,o]of ve)for(const a of t)Object.defineProperty(this,a,{get:()=>{const t=o(n),l=r[e]-t;return this.rect[a]+l},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class fe{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function ye(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Ee,ke,xe;function Ce(e){e.preventDefault()}function we(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Ee||(Ee={})),(xe=ke||(ke={})).Space="Space",xe.Down="ArrowDown",xe.Right="ArrowRight",xe.Left="ArrowLeft",xe.Up="ArrowUp",xe.Esc="Escape",xe.Enter="Enter",xe.Tab="Tab";const Ne={start:[ke.Space,ke.Enter],cancel:[ke.Esc],end:[ke.Space,ke.Enter,ke.Tab]},Se=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ke.Right:return{...n,x:n.x+25};case ke.Left:return{...n,x:n.x-25};case ke.Down:return{...n,y:n.y+25};case ke.Up:return{...n,y:n.y-25}}};class Le{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new fe(g(t)),this.windowListeners=new fe(d(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&he(n),t(j)}handleKeyDown(e){if(S(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:o=Ne,coordinateGetter:a=Se,scrollBehavior:l="smooth"}=r,{code:i}=e;if(o.end.includes(i))return void this.handleEnd(e);if(o.cancel.includes(i))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:j;this.referenceCoordinates||(this.referenceCoordinates=c);const d=a(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=N(d,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=e.code,{isTop:a,isRight:i,isLeft:s,isBottom:c,maxScroll:u,minScroll:m}=de(n),p=pe(n),g={x:Math.min(o===ke.Right?p.right-p.width/2:p.right,Math.max(o===ke.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(o===ke.Down?p.bottom-p.height/2:p.bottom,Math.max(o===ke.Down?p.top:p.top+p.height/2,d.y))},h=o===ke.Right&&!i||o===ke.Left&&!s,v=o===ke.Down&&!c||o===ke.Up&&!a;if(h&&g.x!==d.x){const e=n.scrollLeft+t.x,a=o===ke.Right&&e<=u.x||o===ke.Left&&e>=m.x;if(a&&!t.y)return void n.scrollTo({left:e,behavior:l});r.x=a?n.scrollLeft-e:o===ke.Right?n.scrollLeft-u.x:n.scrollLeft-m.x,r.x&&n.scrollBy({left:-r.x,behavior:l});break}if(v&&g.y!==d.y){const e=n.scrollTop+t.y,a=o===ke.Down&&e<=u.y||o===ke.Up&&e>=m.y;if(a&&!t.x)return void n.scrollTo({top:e,behavior:l});r.y=a?n.scrollTop-e:o===ke.Down?n.scrollTop-u.y:n.scrollTop-m.y,r.y&&n.scrollBy({top:-r.y,behavior:l});break}}this.handleMove(e,w(N(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Me(e){return Boolean(e&&"distance"in e)}function De(e){return Boolean(e&&"delay"in e)}Le.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Ne,onActivation:o}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const t=a.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==o||o({event:e.nativeEvent}),0))}return!1}}];class Re{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=d(e);return e instanceof t?e:g(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:o}=e,{target:a}=o;this.props=e,this.events=t,this.document=g(a),this.documentListeners=new fe(this.document),this.listeners=new fe(n),this.windowListeners=new fe(d(a)),this.initialCoordinates=null!=(r=L(o))?r:j,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ee.Resize,this.handleCancel),this.windowListeners.add(Ee.DragStart,Ce),this.windowListeners.add(Ee.VisibilityChange,this.handleCancel),this.windowListeners.add(Ee.ContextMenu,Ce),this.documentListeners.add(Ee.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(De(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Me(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ee.Click,we,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ee.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:a,options:{activationConstraint:l}}=o;if(!r)return;const i=null!=(t=L(e))?t:j,s=N(r,i);if(!n&&l){if(Me(l)){if(null!=l.tolerance&&ye(s,l.tolerance))return this.handleCancel();if(ye(s,l.distance))return this.handleStart()}return De(l)&&ye(s,l.tolerance)?this.handleCancel():void this.handlePending(l,s)}e.cancelable&&e.preventDefault(),a(i)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ke.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Te={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ie extends Re{constructor(e){const{event:t}=e,n=g(t.target);super(e,Te,n)}}Ie.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const Be={move:{name:"mousemove"},end:{name:"mouseup"}};var Ae;!function(e){e[e.RightClick=2]="RightClick"}(Ae||(Ae={})),class extends Re{constructor(e){super(e,Be,g(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Ae.RightClick&&(null==r||r({event:n}),!0)}}];const $e={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Oe,ze;(class extends Re{constructor(e){super(e,$e)}static setup(){return window.addEventListener($e.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener($e.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return!(o.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Oe||(Oe={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(ze||(ze={}));const Pe={x:{[se.Backward]:!1,[se.Forward]:!1},y:{[se.Backward]:!1,[se.Forward]:!1}};var We,je;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(We||(We={})),function(e){e.Optimized="optimized"}(je||(je={}));const He=new Map;function Fe(e,t){return f(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function Ue(e){let{callback:t,disabled:n}=e;const o=v(t),a=(0,r.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(o)},[n]);return(0,r.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function _e(e){return new be(ee(e),e)}function Ve(e,t,n){void 0===t&&(t=_e);const[o,a]=(0,r.useState)(null);function l(){a(r=>{if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=r?r:n)?o:null;const a=t(e);return JSON.stringify(r)===JSON.stringify(a)?r:a})}const i=function(e){let{callback:t,disabled:n}=e;const o=v(t),a=(0,r.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(o)},[o,n]);return(0,r.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){l();break}}}}),s=Ue({callback:l});return h(()=>{l(),e?(null==s||s.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==i||i.disconnect())},[e]),o}const Ye=[];function Xe(e,t){void 0===t&&(t=[]);const n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current=null},t),(0,r.useEffect)(()=>{const t=e!==j;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?N(e,n.current):j}function Ke(e){return(0,r.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const Je=[];function qe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return m(t)?t:e}const Ge=[{sensor:Ie,options:{}},{sensor:Le,options:{}}],Ze={current:{}},Qe={draggable:{measure:te},droppable:{measure:te,strategy:We.WhileDragging,frequency:je.Optimized},dragOverlay:{measure:ee}};class et extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const tt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new et,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:W},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qe,measureDroppableContainers:W,windowRect:null,measuringScheduled:!1},nt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:W,draggableNodes:new Map,over:null,measureDroppableContainers:W},rt=(0,r.createContext)(nt),ot=(0,r.createContext)(tt);function at(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new et}}}function lt(e,t){switch(t.type){case P.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case P.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case P.DragEnd:case P.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case P.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new et(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case P.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new et(e.droppable.containers);return l.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:l}}}case P.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new et(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function it(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:a}=(0,r.useContext)(rt),l=E(o),i=E(null==n?void 0:n.id);return(0,r.useEffect)(()=>{if(!t&&!o&&l&&null!=i){if(!S(l))return;if(document.activeElement===l.target)return;const e=a.get(i);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=R(e);if(t){t.focus();break}}})}},[o,t,a,i,l]),null}function st(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}const ct=(0,r.createContext)({...j,scaleX:1,scaleY:1});var dt;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(dt||(dt={}));const ut=(0,r.memo)(function(e){var t,n,a,s;let{id:c,accessibility:u,autoScroll:p=!0,children:g,sensors:v=Ge,collisionDetection:k=K,measuring:C,modifiers:N,...S}=e;const M=(0,r.useReducer)(lt,void 0,at),[D,R]=M,[T,I]=function(){const[e]=(0,r.useState)(()=>new Set),t=(0,r.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,r.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[B,$]=(0,r.useState)(dt.Uninitialized),O=B===dt.Initialized,{draggable:{active:W,nodes:H,translate:F},droppable:{containers:U}}=D,_=null!=W?H.get(W):null,V=(0,r.useRef)({initial:null,translated:null}),Y=(0,r.useMemo)(()=>{var e;return null!=W?{id:W,data:null!=(e=null==_?void 0:_.data)?e:Ze,rect:V}:null},[W,_]),X=(0,r.useRef)(null),[q,Z]=(0,r.useState)(null),[Q,te]=(0,r.useState)(null),ae=b(S,Object.values(S)),le=x("DndDescribedBy",c),de=(0,r.useMemo)(()=>U.getEnabled(),[U]),ue=(pe=C,(0,r.useMemo)(()=>({draggable:{...Qe.draggable,...null==pe?void 0:pe.draggable},droppable:{...Qe.droppable,...null==pe?void 0:pe.droppable},dragOverlay:{...Qe.dragOverlay,...null==pe?void 0:pe.dragOverlay}}),[null==pe?void 0:pe.draggable,null==pe?void 0:pe.droppable,null==pe?void 0:pe.dragOverlay]));var pe;const{droppableRects:he,measureDroppableContainers:ve,measuringScheduled:fe}=function(e,t){let{dragging:n,dependencies:o,config:a}=t;const[l,i]=(0,r.useState)(null),{frequency:s,measure:c,strategy:d}=a,u=(0,r.useRef)(e),m=function(){switch(d){case We.Always:return!1;case We.BeforeDragging:return n;default:return!n}}(),p=b(m),g=(0,r.useCallback)(function(e){void 0===e&&(e=[]),p.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),h=(0,r.useRef)(null),v=f(t=>{if(m&&!n)return He;if(!t||t===He||u.current!==e||null!=l){const t=new Map;for(let n of e){if(!n)continue;if(l&&l.length>0&&!l.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new be(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,l,n,m,c]);return(0,r.useEffect)(()=>{u.current=e},[e]),(0,r.useEffect)(()=>{m||g()},[n,m]),(0,r.useEffect)(()=>{l&&l.length>0&&i(null)},[JSON.stringify(l)]),(0,r.useEffect)(()=>{m||"number"!=typeof s||null!==h.current||(h.current=setTimeout(()=>{g(),h.current=null},s))},[s,m,g,...o]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:null!=l}}(de,{dragging:O,dependencies:[F.x,F.y],config:ue.droppable}),ye=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return f(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(H,W),Ee=(0,r.useMemo)(()=>Q?L(Q):null,[Q]),ke=function(){const e=!1===(null==q?void 0:q.autoScrollEnabled),t="object"==typeof p?!1===p.enabled:!1===p,n=O&&!e&&!t;return"object"==typeof p?{...p,enabled:n}:{enabled:n}}(),xe=function(e,t){return Fe(e,t)}(ye,ue.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:o,config:a=!0}=e;const l=(0,r.useRef)(!1),{x:i,y:s}="boolean"==typeof a?{x:a,y:a}:a;h(()=>{if(!i&&!s||!t)return void(l.current=!1);if(l.current||!o)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=J(n(e),o);if(i||(r.x=0),s||(r.y=0),l.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=re(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,i,s,o,n])}({activeNode:null!=W?H.get(W):null,config:ke.layoutShiftCompensation,initialRect:xe,measure:ue.draggable.measure});const Ce=Ve(ye,ue.draggable.measure,xe),we=Ve(ye?ye.parentElement:null),Ne=(0,r.useRef)({activatorEvent:null,active:null,activeNode:ye,collisionRect:null,collisions:null,droppableRects:he,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=U.getNodeFor(null==(t=Ne.current.over)?void 0:t.id),Le=function(e){let{measure:t}=e;const[n,o]=(0,r.useState)(null),a=Ue({callback:(0,r.useCallback)(e=>{for(const{target:n}of e)if(m(n)){o(e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),l=(0,r.useCallback)(e=>{const n=qe(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),o(n?t(n):null)},[t,a]),[i,s]=y(l);return(0,r.useMemo)(()=>({nodeRef:i,rect:n,setRef:s}),[n,i,s])}({measure:ue.dragOverlay.measure}),Me=null!=(n=Le.nodeRef.current)?n:ye,De=O?null!=(a=Le.rect)?a:Ce:null,Re=Boolean(Le.nodeRef.current&&Le.rect),Te=J(Ie=Re?null:Ce,Fe(Ie));var Ie;const Be=Ke(Me?d(Me):null),Ae=function(e){const t=(0,r.useRef)(e),n=f(n=>e?n&&n!==Ye&&e&&t.current&&e.parentNode===t.current.parentNode?n:ne(e):Ye,[e]);return(0,r.useEffect)(()=>{t.current=e},[e]),n}(O?null!=Se?Se:ye:null),$e=function(e,t){void 0===t&&(t=ee);const[n]=e,o=Ke(n?d(n):null),[a,l]=(0,r.useState)(Je);function i(){l(()=>e.length?e.map(e=>ce(e)?o:new be(t(e),e)):Je)}const s=Ue({callback:i});return h(()=>{null==s||s.disconnect(),i(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),a}(Ae),je=st(N,{transform:{x:F.x-Te.x,y:F.y-Te.y,scaleX:1,scaleY:1},activatorEvent:Q,active:Y,activeNodeRect:Ce,containerNodeRect:we,draggingNodeRect:De,over:Ne.current.over,overlayNodeRect:Le.rect,scrollableAncestors:Ae,scrollableAncestorRects:$e,windowRect:Be}),_e=Ee?w(Ee,F):null,et=function(e){const[t,n]=(0,r.useState)(null),o=(0,r.useRef)(e),a=(0,r.useCallback)(e=>{const t=oe(e.target);t&&n(e=>e?(e.set(t,ie(t)),new Map(e)):null)},[]);return(0,r.useEffect)(()=>{const t=o.current;if(e!==t){r(t);const l=e.map(e=>{const t=oe(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,ie(t)]):null}).filter(e=>null!=e);n(l.length?new Map(l):null),o.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=oe(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,r.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>w(e,t),j):ge(e):j,[e,t])}(Ae),tt=Xe(et),nt=Xe(et,[Ce]),ut=w(je,tt),mt=De?G(De,je):null,pt=Y&&mt?k({active:Y,collisionRect:mt,droppableRects:he,droppableContainers:de,pointerCoordinates:_e}):null,gt=function(e){if(!e||0===e.length)return null;const[t]=e;return t.id}(pt),[ht,vt]=(0,r.useState)(null),bt=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(Re?je:w(je,nt),null!=(s=null==ht?void 0:ht.rect)?s:null,Ce),ft=(0,r.useRef)(null),yt=(0,r.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==X.current)return;const o=H.get(X.current);if(!o)return;const a=e.nativeEvent,i=new n({active:X.current,activeNode:o,event:a,options:r,context:Ne,onAbort(e){if(!H.get(e))return;const{onDragAbort:t}=ae.current,n={id:e};null==t||t(n),T({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!H.get(e))return;const{onDragPending:o}=ae.current,a={id:e,constraint:t,initialCoordinates:n,offset:r};null==o||o(a),T({type:"onDragPending",event:a})},onStart(e){const t=X.current;if(null==t)return;const n=H.get(t);if(!n)return;const{onDragStart:r}=ae.current,o={activatorEvent:a,active:{id:t,data:n.data,rect:V}};(0,l.unstable_batchedUpdates)(()=>{null==r||r(o),$(dt.Initializing),R({type:P.DragStart,initialCoordinates:e,active:t}),T({type:"onDragStart",event:o}),Z(ft.current),te(a)})},onMove(e){R({type:P.DragMove,coordinates:e})},onEnd:s(P.DragEnd),onCancel:s(P.DragCancel)});function s(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:o}=Ne.current;let i=null;if(t&&o){const{cancelDrop:l}=ae.current;i={activatorEvent:a,active:t,collisions:n,delta:o,over:r},e===P.DragEnd&&"function"==typeof l&&await Promise.resolve(l(i))&&(e=P.DragCancel)}X.current=null,(0,l.unstable_batchedUpdates)(()=>{R({type:e}),$(dt.Uninitialized),vt(null),Z(null),te(null),ft.current=null;const t=e===P.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=ae.current[t];null==e||e(i),T({type:t,event:i})}})}}ft.current=i},[H]),Et=(0,r.useCallback)((e,t)=>(n,r)=>{const o=n.nativeEvent,a=H.get(r);if(null!==X.current||!a||o.dndKit||o.defaultPrevented)return;const l={active:a};!0===e(n,t.options,l)&&(o.dndKit={capturedBy:t.sensor},X.current=r,yt(n,t))},[H,yt]),kt=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(v,Et);!function(e){(0,r.useEffect)(()=>{if(!i)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(v),h(()=>{Ce&&B===dt.Initializing&&$(dt.Initialized)},[Ce,B]),(0,r.useEffect)(()=>{const{onDragMove:e}=ae.current,{active:t,activatorEvent:n,collisions:r,over:o}=Ne.current;if(!t||!n)return;const a={active:t,activatorEvent:n,collisions:r,delta:{x:ut.x,y:ut.y},over:o};(0,l.unstable_batchedUpdates)(()=>{null==e||e(a),T({type:"onDragMove",event:a})})},[ut.x,ut.y]),(0,r.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:o}=Ne.current;if(!e||null==X.current||!t||!o)return;const{onDragOver:a}=ae.current,i=r.get(gt),s=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:o.x,y:o.y},over:s};(0,l.unstable_batchedUpdates)(()=>{vt(s),null==a||a(c),T({type:"onDragOver",event:c})})},[gt]),h(()=>{Ne.current={activatorEvent:Q,active:Y,activeNode:ye,collisionRect:mt,collisions:pt,droppableRects:he,draggableNodes:H,draggingNode:Me,draggingNodeRect:De,droppableContainers:U,over:ht,scrollableAncestors:Ae,scrollAdjustedTranslate:ut},V.current={initial:De,translated:mt}},[Y,ye,pt,mt,H,Me,De,he,U,ht,Ae,ut]),function(e){let{acceleration:t,activator:n=Oe.Pointer,canScroll:o,draggingRect:a,enabled:l,interval:i=5,order:s=ze.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:p}=e;const g=function(e){let{delta:t,disabled:n}=e;const r=E(t);return f(e=>{if(n||!r||!e)return Pe;const o=Math.sign(t.x-r.x),a=Math.sign(t.y-r.y);return{x:{[se.Backward]:e.x[se.Backward]||-1===o,[se.Forward]:e.x[se.Forward]||1===o},y:{[se.Backward]:e.y[se.Backward]||-1===a,[se.Forward]:e.y[se.Forward]||1===a}}},[n,t,r])}({delta:m,disabled:!l}),[h,v]=function(){const e=(0,r.useRef)(null);return[(0,r.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),b=(0,r.useRef)({x:0,y:0}),y=(0,r.useRef)({x:0,y:0}),k=(0,r.useMemo)(()=>{switch(n){case Oe.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Oe.DraggableRect:return a}},[n,a,c]),x=(0,r.useRef)(null),C=(0,r.useCallback)(()=>{const e=x.current;if(!e)return;const t=b.current.x*y.current.x,n=b.current.y*y.current.y;e.scrollBy(t,n)},[]),w=(0,r.useMemo)(()=>s===ze.TreeOrder?[...d].reverse():d,[s,d]);(0,r.useEffect)(()=>{if(l&&d.length&&k){for(const e of w){if(!1===(null==o?void 0:o(e)))continue;const n=d.indexOf(e),r=u[n];if(!r)continue;const{direction:a,speed:l}=me(e,r,k,t,p);for(const e of["x","y"])g[e][a[e]]||(l[e]=0,a[e]=0);if(l.x>0||l.y>0)return v(),x.current=e,h(C,i),b.current=l,void(y.current=a)}b.current={x:0,y:0},y.current={x:0,y:0},v()}else v()},[t,C,o,v,l,i,JSON.stringify(k),JSON.stringify(g),h,d,w,u,JSON.stringify(p)])}({...ke,delta:F,draggingRect:mt,pointerCoordinates:_e,scrollableAncestors:Ae,scrollableAncestorRects:$e});const xt=(0,r.useMemo)(()=>({active:Y,activeNode:ye,activeNodeRect:Ce,activatorEvent:Q,collisions:pt,containerNodeRect:we,dragOverlay:Le,draggableNodes:H,droppableContainers:U,droppableRects:he,over:ht,measureDroppableContainers:ve,scrollableAncestors:Ae,scrollableAncestorRects:$e,measuringConfiguration:ue,measuringScheduled:fe,windowRect:Be}),[Y,ye,Ce,Q,pt,we,Le,H,U,he,ht,ve,Ae,$e,ue,fe,Be]),Ct=(0,r.useMemo)(()=>({activatorEvent:Q,activators:kt,active:Y,activeNodeRect:Ce,ariaDescribedById:{draggable:le},dispatch:R,draggableNodes:H,over:ht,measureDroppableContainers:ve}),[Q,kt,Y,Ce,R,le,H,ht,ve]);return o().createElement(A.Provider,{value:I},o().createElement(rt.Provider,{value:Ct},o().createElement(ot.Provider,{value:xt},o().createElement(ct.Provider,{value:bt},g)),o().createElement(it,{disabled:!1===(null==u?void 0:u.restoreFocus)})),o().createElement(z,{...u,hiddenTextDescribedById:le}))}),mt=(0,r.createContext)(null),pt="button";function gt(e){let{id:t,data:n,disabled:o=!1,attributes:a}=e;const l=x("Draggable"),{activators:i,activatorEvent:s,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:p}=(0,r.useContext)(rt),{role:g=pt,roleDescription:v="draggable",tabIndex:f=0}=null!=a?a:{},E=(null==c?void 0:c.id)===t,k=(0,r.useContext)(E?ct:mt),[C,w]=y(),[N,S]=y(),L=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:o}=n;return e[r]=e=>{o(e,t)},e},{}),[e,t])}(i,t),M=b(n);return h(()=>(m.set(t,{id:t,key:l,node:C,activatorNode:N,data:M}),()=>{const e=m.get(t);e&&e.key===l&&m.delete(t)}),[m,t]),{active:c,activatorEvent:s,activeNodeRect:d,attributes:(0,r.useMemo)(()=>({role:g,tabIndex:f,"aria-disabled":o,"aria-pressed":!(!E||g!==pt)||void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[o,g,f,E,v,u.draggable]),isDragging:E,listeners:o?void 0:L,node:C,over:p,setNodeRef:w,setActivatorNodeRef:S,transform:k}}function ht(){return(0,r.useContext)(ot)}const vt={timeout:25};function bt(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:a}=e;const l=x("Droppable"),{active:i,dispatch:s,over:c,measureDroppableContainers:d}=(0,r.useContext)(rt),u=(0,r.useRef)({disabled:n}),m=(0,r.useRef)(!1),p=(0,r.useRef)(null),g=(0,r.useRef)(null),{disabled:h,updateMeasurementsFor:v,timeout:f}={...vt,...a},E=b(null!=v?v:o),k=Ue({callback:(0,r.useCallback)(()=>{m.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(E.current)?E.current:[E.current]),g.current=null},f)):m.current=!0},[f]),disabled:h||!i}),C=(0,r.useCallback)((e,t)=>{k&&(t&&(k.unobserve(t),m.current=!1),e&&k.observe(e))},[k]),[w,N]=y(C),S=b(t);return(0,r.useEffect)(()=>{k&&w.current&&(k.disconnect(),m.current=!1,k.observe(w.current))},[w,k]),(0,r.useEffect)(()=>(s({type:P.RegisterDroppable,element:{id:o,key:l,disabled:n,node:w,rect:p,data:S}}),()=>s({type:P.UnregisterDroppable,key:l,id:o})),[o]),(0,r.useEffect)(()=>{n!==u.current.disabled&&(s({type:P.SetDroppableDisabled,id:o,key:l,disabled:n}),u.current.disabled=n)},[o,l,n,s]),{active:i,rect:p,isOver:(null==c?void 0:c.id)===o,node:w,over:c,setNodeRef:N}}function ft(e){let{animation:t,children:n}=e;const[a,l]=(0,r.useState)(null),[i,s]=(0,r.useState)(null),c=E(n);return n||a||!c||l(c),h(()=>{if(!i)return;const e=null==a?void 0:a.key,n=null==a?void 0:a.props.id;null!=e&&null!=n?Promise.resolve(t(n,i)).then(()=>{l(null)}):l(null)},[t,a,i]),o().createElement(o().Fragment,null,n,a?(0,r.cloneElement)(a,{ref:s}):null)}const yt={x:0,y:0,scaleX:1,scaleY:1};function Et(e){let{children:t}=e;return o().createElement(rt.Provider,{value:nt},o().createElement(ct.Provider,{value:yt},t))}const kt={position:"fixed",touchAction:"none"},xt=e=>S(e)?"transform 250ms ease":void 0,Ct=(0,r.forwardRef)((e,t)=>{let{as:n,activatorEvent:r,adjustScale:a,children:l,className:i,rect:s,style:c,transform:d,transition:u=xt}=e;if(!s)return null;const m=a?d:{...d,scaleX:1,scaleY:1},p={...kt,width:s.width,height:s.height,top:s.top,left:s.left,transform:M.Transform.toString(m),transformOrigin:a&&r?F(r,s):void 0,transition:"function"==typeof u?u(r):u,...c};return o().createElement(n,{className:i,style:p,ref:t},l)}),wt=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:a,className:l}=e;if(null!=a&&a.active)for(const[e,t]of Object.entries(a.active))void 0!==t&&(o[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=a&&a.dragOverlay)for(const[e,t]of Object.entries(a.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=l&&l.active&&n.node.classList.add(l.active),null!=l&&l.dragOverlay&&r.node.classList.add(l.dragOverlay),function(){for(const[e,t]of Object.entries(o))n.node.style.setProperty(e,t);null!=l&&l.active&&n.node.classList.remove(l.active)}},Nt={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:M.Transform.toString(t)},{transform:M.Transform.toString(n)}]},sideEffects:wt({styles:{active:{opacity:"0"}}})};let St=0;function Lt(e){return(0,r.useMemo)(()=>{if(null!=e)return St++,St},[e])}const Mt=o().memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:a,style:l,transition:i,modifiers:s,wrapperElement:c="div",className:u,zIndex:m=999}=e;const{activatorEvent:p,active:g,activeNodeRect:h,containerNodeRect:b,draggableNodes:f,droppableContainers:y,dragOverlay:E,over:k,measuringConfiguration:x,scrollableAncestors:C,scrollableAncestorRects:w,windowRect:N}=ht(),S=(0,r.useContext)(ct),L=Lt(null==g?void 0:g.id),M=st(s,{activatorEvent:p,active:g,activeNodeRect:h,containerNodeRect:b,draggingNodeRect:E.rect,over:k,overlayNodeRect:E.rect,scrollableAncestors:C,scrollableAncestorRects:w,transform:S,windowRect:N}),D=Fe(h),R=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return v((e,a)=>{if(null===t)return;const l=n.get(e);if(!l)return;const i=l.node.current;if(!i)return;const s=qe(a);if(!s)return;const{transform:c}=d(a).getComputedStyle(a),u=Z(c);if(!u)return;const m="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...Nt,...e};return e=>{let{active:a,dragOverlay:l,transform:i,...s}=e;if(!t)return;const c=l.rect.left-a.rect.left,d=l.rect.top-a.rect.top,u={scaleX:1!==i.scaleX?a.rect.width*i.scaleX/l.rect.width:1,scaleY:1!==i.scaleY?a.rect.height*i.scaleY/l.rect.height:1},m={x:i.x-c,y:i.y-d,...u},p=o({...s,active:a,dragOverlay:l,transform:{initial:i,final:m}}),[g]=p,h=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(h))return;const v=null==r?void 0:r({active:a,dragOverlay:l,...s}),b=l.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{b.onfinish=()=>{null==v||v(),e()}})}}(t);return he(i,o.draggable.measure),m({active:{id:e,data:l.data,node:i,rect:o.draggable.measure(i)},draggableNodes:n,dragOverlay:{node:a,rect:o.dragOverlay.measure(s)},droppableContainers:r,measuringConfiguration:o,transform:u})})}({config:a,draggableNodes:f,droppableContainers:y,measuringConfiguration:x}),T=D?E.setRef:void 0;return o().createElement(Et,null,o().createElement(ft,{animation:R},g&&L?o().createElement(Ct,{key:L,id:g.id,ref:T,as:c,activatorEvent:p,adjustScale:t,className:u,transition:i,rect:D,style:{zIndex:m,...l},transform:M},n):null))});function Dt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Rt(e,t){return e.reduce((e,n,r)=>{const o=t.get(n);return o&&(e[r]=o),e},Array(e.length))}function Tt(e){return null!==e&&e>=0}const It=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=Dt(t,r,n),l=t[o],i=a[o];return i&&l?{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}:null},Bt={scaleX:1,scaleY:1},At=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:l}=e;const i=null!=(t=a[n])?t:r;if(!i)return null;if(o===n){const e=a[l];return e?{x:0,y:n<l?e.top+e.height-(i.top+i.height):e.top-i.top,...Bt}:null}const s=function(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}(a,o,n);return o>n&&o<=l?{x:0,y:-i.height-s,...Bt}:o<n&&o>=l?{x:0,y:i.height+s,...Bt}:{x:0,y:0,...Bt}},$t="Sortable",Ot=o().createContext({activeIndex:-1,containerId:$t,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:It,disabled:{draggable:!1,droppable:!1}});function zt(e){let{children:t,id:n,items:a,strategy:l=It,disabled:i=!1}=e;const{active:s,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:m}=ht(),p=x($t,n),g=Boolean(null!==c.rect),v=(0,r.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),b=null!=s,f=s?v.indexOf(s.id):-1,y=u?v.indexOf(u.id):-1,E=(0,r.useRef)(v),k=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(v,E.current),C=-1!==y&&-1===f||k,w=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(i);h(()=>{k&&b&&m(v)},[k,v,b,m]),(0,r.useEffect)(()=>{E.current=v},[v]);const N=(0,r.useMemo)(()=>({activeIndex:f,containerId:p,disabled:w,disableTransforms:C,items:v,overIndex:y,useDragOverlay:g,sortedRects:Rt(v,d),strategy:l}),[f,p,w.draggable,w.droppable,C,v,y,d,g,l]);return o().createElement(Ot.Provider,{value:N},t)}const Pt=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Dt(n,r,o).indexOf(t)},Wt=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:l,previousItems:i,previousContainerId:s,transition:c}=e;return!(!c||!r||i!==a&&o===l||!n&&(l===o||t!==s))},jt={duration:200,easing:"ease"},Ht="transform",Ft=M.Transition.toString({property:Ht,duration:0,easing:"linear"}),Ut={roleDescription:"sortable"};ke.Down,ke.Right,ke.Up,ke.Left;const _t=e=>{let t;const n=new Set,r=(e,r)=>{const o="function"==typeof e?e(t):e;if(!Object.is(o,t)){const e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,a={setState:r,getState:o,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!=={NODE_ENV:"production"}.MODE&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,o,a);return a};var Vt=n(242);const{useDebugValue:Yt}=r,{useSyncExternalStoreWithSelector:Xt}=Vt;let Kt=!1;const Jt=e=>e,qt=e=>{"production"!=={NODE_ENV:"production"}.MODE&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?(e=>e?_t(e):_t)(e):e,n=(e,n)=>function(e,t=Jt,n){"production"!=={NODE_ENV:"production"}.MODE&&n&&!Kt&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Kt=!0);const r=Xt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Yt(r),r}(t,e,n);return Object.assign(n,t),n},Gt=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Zt=(e,t)=>{const n=parseInt(t.contentWidth,10),r=t.backgroundColor;return`<!DOCTYPE html>\n<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:o="urn:schemas-microsoft-com:office:office">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="IE=edge">\n    <meta name="x-apple-disable-message-reformatting">\n    <title></title>\n    \x3c!--[if mso]>\n    <noscript>\n        <xml>\n            <o:OfficeDocumentSettings>\n                <o:PixelsPerInch>96</o:PixelsPerInch>\n            </o:OfficeDocumentSettings>\n        </xml>\n    </noscript>\n    <![endif]--\x3e\n    <style type="text/css">\n        body { margin: 0; padding: 0; width: 100% !important; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }\n        table { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }\n        img { border: 0; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; }\n        a { text-decoration: none; }\n        @media only screen and (max-width: 620px) {\n            .container { width: 100% !important; }\n            .content { padding: 10px !important; }\n            .column { width: 100% !important; display: block !important; }\n        }\n    </style>\n</head>\n<body style="margin: 0; padding: 0; background-color: ${r}; font-family: ${t.fontFamily}; color: ${t.textColor};">\n    <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%" style="background-color: ${r};">\n        <tr>\n            <td align="center" style="padding: 20px 0;">\n                \x3c!--[if mso]>\n                <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="${n}">\n                <tr>\n                <td>\n                <![endif]--\x3e\n                <table role="presentation" class="container" border="0" cellpadding="0" cellspacing="0" width="${n}" style="max-width: ${n}px; width: 100%;">\n                    ${Qt(e,t)}\n                </table>\n                \x3c!--[if mso]>\n                </td>\n                </tr>\n                </table>\n                <![endif]--\x3e\n            </td>\n        </tr>\n    </table>\n</body>\n</html>`},Qt=(e,t,n="")=>e.map(e=>en(e,t,n)).join(""),en=(e,t,n="")=>{const r=e.attributes;switch(e.type){case"email-wrapper":{const n=r.backgroundColor||"#ffffff";return`<tr>\n    <td style="background-color: ${n}; padding: ${r.padding||"20px"};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">\n            ${e.children?Qt(e.children,t,n):""}\n        </table>\n    </td>\n</tr>`}case"row":{const o=r.backgroundColor||"transparent",a="transparent"!==o&&o?o:n;return`<tr>\n    <td style="background-color: ${o}; padding: ${r.padding||"0"};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">\n            ${e.children?Qt(e.children,t,a):""}\n        </table>\n    </td>\n</tr>`}case"columns-1":case"columns-2":case"columns-2-sidebar":case"columns-3":{const o=r.backgroundColor||"transparent",a=parseInt(t.contentWidth,10),l="transparent"!==o&&o?o:n,i=r.columnWidths;let s;if(i&&i.length>0)s=i;else switch(e.type){case"columns-1":default:s=[100];break;case"columns-2":s=[50,50];break;case"columns-2-sidebar":s="70-30"===r.layout?[70,30]:[30,70];break;case"columns-3":s=[33,34,33]}return`<tr>\n    <td style="background-color: ${o};">\n        \x3c!--[if mso]>\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">\n        <tr>\n        <![endif]--\x3e\n        ${(e.children||[]).map((e,n)=>{const r=s[n]||s[0],o=Math.floor(a*r/100);return`\x3c!--[if mso]>\n<td valign="top" width="${o}">\n<![endif]--\x3e\n<div class="column" style="display: inline-block; vertical-align: top; width: 100%; max-width: ${o}px;">\n    <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">\n        ${en(e,t,l)}\n    </table>\n</div>\n\x3c!--[if mso]>\n</td>\n<![endif]--\x3e`}).join("")}\n        \x3c!--[if mso]>\n        </tr>\n        </table>\n        <![endif]--\x3e\n    </td>\n</tr>`}case"header":{const e=r.backgroundColor||t.primaryColor,n=r.padding||"30px 20px",o=r.logoUrl,a=r.logoAlt||"",l=r.logoWidth||200;return`<tr>\n    <td align="${r.align||"center"}" style="background-color: ${e}; padding: ${n};">\n        ${o?`<img src="${o}" alt="${Gt(a)}" width="${l}" style="display: block; max-width: 100%; height: auto;">`:'<h1 style="margin: 0; color: #ffffff; font-size: 24px;">Your Logo</h1>'}\n    </td>\n</tr>`}case"heading":{const e=Math.min(6,Math.max(1,r.level||2)),n=`h${e}`,o=Gt(r.text||""),a=r.color||t.textColor,l=r.align||"left",i=r.fontSize||(e=>({1:"32px",2:"28px",3:"24px",4:"20px",5:"18px",6:"16px"}[e]||"16px"))(e);return`<tr>\n    <td style="padding: ${r.padding||"10px 0"};">\n        <${n} style="margin: 0; color: ${a}; text-align: ${l}; font-size: ${i}; font-weight: bold;">${o}</${n}>\n    </td>\n</tr>`}case"text":{const e=r.content||"",n=r.color||t.textColor,o=r.fontSize||t.fontSize,a=r.lineHeight||t.lineHeight,l=r.align||"left";return`<tr>\n    <td style="padding: ${r.padding||"10px 0"};">\n        <p style="margin: 0; color: ${n}; font-size: ${o}; line-height: ${a}; text-align: ${l}; font-family: ${t.fontFamily};">${e}</p>\n    </td>\n</tr>`}case"button":{const e=Gt(r.text||"Click Here"),n=r.url||"#",o=r.backgroundColor||t.primaryColor,a=r.textColor||"#ffffff",l=r.borderRadius||4,i=r.fontSize||"16px",s=r.paddingV||12,c=r.paddingH||24,d=r.align||"center",u=r.padding||"10px 0",m=r.width||"auto";return`<tr>\n    <td align="${d}" style="padding: ${u};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0"${"auto"!==m?' width="100%"':""}>\n            <tr>\n                <td align="center" bgcolor="${o}" style="border-radius: ${l}px;">\n                    \x3c!--[if mso]>\n                    <v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="${n}" style="height:auto;v-text-anchor:middle;width:auto;" arcsize="10%" strokecolor="${o}" fillcolor="${o}">\n                    <w:anchorlock/>\n                    <center style="color:${a};font-family:Arial,sans-serif;font-size:${i};">\n                    <![endif]--\x3e\n                    <a href="${n}" target="_blank" style="display: inline-block; min-width: 200px; padding: ${s}px ${c}px; font-family: Arial, sans-serif; font-size: ${i}; color: ${a}; text-decoration: none; background-color: ${o}; border-radius: ${l}px; font-weight: bold; white-space: nowrap; text-align: center; mso-padding-alt: 0; ${"auto"!==m?`width: ${m}; box-sizing: border-box; text-align: center;`:""}">${e}</a>\n                    \x3c!--[if mso]>\n                    </center>\n                    </v:roundrect>\n                    <![endif]--\x3e\n                </td>\n            </tr>\n        </table>\n    </td>\n</tr>`}case"image":{const e=r.url||"",t=Gt(r.alt||""),n=r.width||"100%",o=r.link,a=r.align||"center",l=r.padding||"10px 0";if(!e)return"";let i=`<img src="${e}" alt="${t}" width="${n}" style="display: block; max-width: 100%; height: auto;">`;return o&&(i=`<a href="${o}" target="_blank">${i}</a>`),`<tr>\n    <td align="${a}" style="padding: ${l};">\n        ${i}\n    </td>\n</tr>`}case"divider":{const e=r.color||"#dddddd",t=r.thickness||1,n=r.style||"solid";return`<tr>\n    <td style="padding: ${r.padding||"20px 0"};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">\n            <tr>\n                <td style="border-top: ${t}px ${n} ${e};"></td>\n            </tr>\n        </table>\n    </td>\n</tr>`}case"spacer":return`<tr>\n    <td style="height: ${r.height||20}px; font-size: 0; line-height: 0; background-color: ${r.backgroundColor||n||"transparent"};">&nbsp;</td>\n</tr>`;case"social-icons":{const e=r.icons||[],t=r.iconSize||32,n=r.align||"center",o=r.padding||"20px 0",a=r.spacing||10,l={facebook:"#1877f2",twitter:"#1da1f2",instagram:"#e4405f",linkedin:"#0a66c2",youtube:"#ff0000"},i=e.map(e=>{const n=l[e.network]||"#666666",r=e.network.charAt(0).toUpperCase()+e.network.slice(1);return`<td style="padding: 0 ${a}px;">\n    <a href="${e.url}" target="_blank" style="display: inline-block; width: ${t}px; height: ${t}px; background-color: ${n}; border-radius: 50%; text-align: center; line-height: ${t}px; color: #ffffff; font-size: 12px; font-weight: bold; text-decoration: none;" title="${r}">${r[0]}</a>\n</td>`}).join("");return i?`<tr>\n    <td align="${n}" style="padding: ${o};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0">\n            <tr>\n                ${i}\n            </tr>\n        </table>\n    </td>\n</tr>`:""}case"footer":{const e=r.backgroundColor||"#f4f4f4",t=r.textColor||"#666666",n=r.content||`&copy; ${(new Date).getFullYear()} Your Company. All rights reserved.`,o=r.padding||"30px 20px",a=r.align||"center";return`<tr>\n    <td style="background-color: ${e}; padding: ${o};">\n        <p style="margin: 0; color: ${t}; font-size: ${r.fontSize||"12px"}; text-align: ${a}; line-height: 1.5;">${n}</p>\n    </td>\n</tr>`}case"placeholder-confirm-link":case"placeholder-optout-link":case"placeholder-date":case"placeholder-time":case"placeholder-url":case"placeholder-custom":{const n={"placeholder-confirm-link":"[doubleoptinlink]","placeholder-optout-link":"[doubleoptoutlink]","placeholder-date":"[doubleoptin_form_date]","placeholder-time":"[doubleoptin_form_time]","placeholder-url":"[doubleoptin_form_url]","placeholder-custom":`[${r.fieldName||"field_name"}]`}[e.type],o=r.display||"inline",a=r.padding||"0";if("button"===o){const e=r.backgroundColor||t.primaryColor,o=r.textColor||"#ffffff",l=Gt(r.buttonText||"Confirm");return`<tr>\n    <td align="${r.align||"center"}" style="padding: ${a};">\n        <table role="presentation" border="0" cellpadding="0" cellspacing="0">\n            <tr>\n                <td align="center" bgcolor="${e}" style="border-radius: 4px;">\n                    <a href="${n}" target="_blank" style="display: inline-block; padding: 12px 24px; font-family: Arial, sans-serif; font-size: 16px; color: ${o}; text-decoration: none; background-color: ${e}; border-radius: 4px; font-weight: bold;">${l}</a>\n                </td>\n            </tr>\n        </table>\n    </td>\n</tr>`}return n}default:return""}},tn=()=>"block_"+Math.random().toString(36).substr(2,9),nn=e=>e.map(e=>{const t={...e,id:e.id||tn()};return t.children&&t.children.length>0&&(t.children=nn(t.children)),t}),rn={fontFamily:"Arial, Helvetica, sans-serif",fontSize:"16px",lineHeight:"1.5",backgroundColor:"#f4f4f4",contentWidth:"600",primaryColor:"#0073aa",textColor:"#333333",linkColor:"#0073aa",brandLogo:"",brandLogoWidth:0,brandColorPrimary:"",brandColorSecondary:"",brandColorAccent:""},on=(e,t)=>{for(const n of e){if(n.id===t)return n;if(n.children){const e=on(n.children,t);if(e)return e}}return null},an=(e,t,n)=>e.map(e=>e.id===t?n(e):e.children?{...e,children:an(e.children,t,n)}:e),ln=(e,t)=>e.filter(e=>e.id!==t).map(e=>e.children?{...e,children:ln(e.children,t)}:e),sn=(e,t,n,r)=>{if(!n){if(void 0!==r){const n=[...e];return n.splice(r,0,t),n}return[...e,t]}return e.map(e=>{if(e.id===n&&void 0!==e.children){const n=[...e.children||[]];return void 0!==r?n.splice(r,0,t):n.push(t),{...e,children:n}}return e.children?{...e,children:sn(e.children,t,n,r)}:e})},cn=(e,t,n)=>{const r=e.findIndex(e=>e.id===t);if(-1!==r){const t="up"===n?r-1:r+1;if(t>=0&&t<e.length){const n=[...e];return[n[r],n[t]]=[n[t],n[r]],n}return e}return e.map(e=>e.children?{...e,children:cn(e.children,t,n)}:e)},dn=(e,t)=>{switch(e){case"columns-1":default:return[100];case"columns-2":return[50,50];case"columns-2-sidebar":return"30-70"===t?[30,70]:[70,30];case"columns-3":return[33,34,33]}},un=(e,t)=>{const n=[];for(const r of e)if(n.push(r),r.id===t){const e=JSON.parse(JSON.stringify(r));e.id=tn(),e.children&&(e.children=e.children.map(e=>({...e,id:tn()}))),n.push(e)}else if(r.children){const e=n[n.length-1];e&&void 0!==e.children&&(e.children=un(r.children,t))}return n},mn=(or=(e,t)=>({templateId:null,templateTitle:"",templateStatus:"draft",blocks:[],globalStyles:rn,selectedBlockId:null,hoveredBlockId:null,isSaving:!1,isDirty:!1,sidebarTab:"blocks",previewMode:!1,previewDevice:"desktop",history:[],historyIndex:-1,setTemplateId:t=>e({templateId:t}),setTemplateTitle:t=>e({templateTitle:t,isDirty:!0}),setTemplateStatus:t=>e({templateStatus:t,isDirty:!0}),setBlocks:n=>{const r=t();e({blocks:n,isDirty:!0}),r.saveToHistory()},addBlock:(n,r,o)=>{const a=t(),l={...n,id:tn()};void 0!==l.children&&(l.children=l.children.map(e=>({...e,id:tn()}))),e({blocks:sn(a.blocks,l,r,o),isDirty:!0,selectedBlockId:l.id}),a.saveToHistory()},updateBlock:(n,r)=>{const o=t();e({blocks:an(o.blocks,n,e=>({...e,attributes:{...e.attributes,...r}})),isDirty:!0})},deleteBlock:n=>{const r=t();e({blocks:ln(r.blocks,n),isDirty:!0,selectedBlockId:r.selectedBlockId===n?null:r.selectedBlockId}),r.saveToHistory()},moveBlock:(n,r)=>{const o=t();e({blocks:cn(o.blocks,n,r),isDirty:!0}),o.saveToHistory()},duplicateBlock:n=>{const r=t();e({blocks:un(r.blocks,n),isDirty:!0}),r.saveToHistory()},addColumnToBlock:n=>{const r=t(),o=on(r.blocks,n);if(!o)return;const a=o.attributes,l=(a.columnWidths||dn(o.type,a.layout)).length+1,i=Math.floor(100/l),s=Array(l).fill(i);s[s.length-1]=100-i*(l-1),e({blocks:an(r.blocks,n,e=>({...e,attributes:{...e.attributes,columnWidths:s}})),isDirty:!0}),r.saveToHistory()},removeColumnFromBlock:(n,r)=>{const o=t(),a=on(o.blocks,n);if(!a)return;const l=a.attributes,i=l.columnWidths||dn(a.type,l.layout);if(i.length<=1)return;const s=i.filter((e,t)=>t!==r),c=s.reduce((e,t)=>e+t,0);100!==c&&s.length>0&&(s[s.length-1]+=100-c);const d=(a.children||[]).filter(e=>e.attributes._columnIndex!==r).map(e=>{var t;const n=null!==(t=e.attributes._columnIndex)&&void 0!==t?t:0;return n>r?{...e,attributes:{...e.attributes,_columnIndex:n-1}}:e});e({blocks:an(o.blocks,n,e=>({...e,attributes:{...e.attributes,columnWidths:s},children:d})),isDirty:!0}),o.saveToHistory()},setGlobalStyles:t=>e(e=>({globalStyles:{...e.globalStyles,...t},isDirty:!0})),selectBlock:t=>e({selectedBlockId:t,sidebarTab:t?"settings":"blocks"}),hoverBlock:t=>e({hoveredBlockId:t}),setSidebarTab:t=>e({sidebarTab:t}),setPreviewMode:t=>e({previewMode:t}),setPreviewDevice:t=>e({previewDevice:t}),setIsSaving:t=>e({isSaving:t}),setIsDirty:t=>e({isDirty:t}),saveToHistory:()=>{const n=t(),r=n.history.slice(0,n.historyIndex+1);r.push(JSON.parse(JSON.stringify(n.blocks))),e({history:r.slice(-50),historyIndex:Math.min(r.length-1,49)})},undo:()=>{const n=t();if(n.historyIndex>0){const t=n.historyIndex-1;e({blocks:JSON.parse(JSON.stringify(n.history[t])),historyIndex:t,isDirty:!0})}},redo:()=>{const n=t();if(n.historyIndex<n.history.length-1){const t=n.historyIndex+1;e({blocks:JSON.parse(JSON.stringify(n.history[t])),historyIndex:t,isDirty:!0})}},loadTemplate:t=>{const n=t.blocks_json?JSON.parse(t.blocks_json):[],r=nn(n),o=t.global_styles?{...rn,...JSON.parse(t.global_styles)}:rn;e({templateId:t.id,templateTitle:t.title,templateStatus:t.status,blocks:r,globalStyles:o,isDirty:!1,history:[r],historyIndex:0})},getTemplateData:()=>{const e=t();return{title:e.templateTitle||"Untitled Template",status:e.templateStatus,blocks_json:JSON.stringify(e.blocks),global_styles:JSON.stringify(e.globalStyles),html:Zt(e.blocks,e.globalStyles)}}}))?qt(or):qt,pn=[{type:"email-wrapper",label:"Wrapper",icon:"layout",category:"structure",defaultAttributes:{backgroundColor:"#ffffff",padding:"20px"},canHaveChildren:!0},{type:"row",label:"Row",icon:"minus",category:"structure",defaultAttributes:{backgroundColor:"transparent",padding:"0"},canHaveChildren:!0},{type:"columns-1",label:"1 Column",icon:"columns",category:"structure",defaultAttributes:{backgroundColor:"transparent"},canHaveChildren:!0},{type:"columns-2",label:"2 Columns",icon:"columns",category:"structure",defaultAttributes:{backgroundColor:"transparent"},canHaveChildren:!0},{type:"columns-2-sidebar",label:"2 Columns (Sidebar)",icon:"columns",category:"structure",defaultAttributes:{backgroundColor:"transparent",layout:"70-30"},canHaveChildren:!0},{type:"columns-3",label:"3 Columns",icon:"columns",category:"structure",defaultAttributes:{backgroundColor:"transparent"},canHaveChildren:!0},{type:"header",label:"Header",icon:"heading",category:"content",defaultAttributes:{backgroundColor:"#0073aa",padding:"30px 20px",align:"center"}},{type:"heading",label:"Heading",icon:"heading",category:"content",defaultAttributes:{text:"Heading",level:2,color:"#333333",align:"left",padding:"10px 0"}},{type:"text",label:"Text",icon:"editor-paragraph",category:"content",defaultAttributes:{content:"Enter your text here...",color:"#333333",fontSize:"16px",lineHeight:"1.5",align:"left",padding:"10px 0"}},{type:"button",label:"Button",icon:"button",category:"content",defaultAttributes:{text:"Click Here",url:"#",backgroundColor:"#0073aa",textColor:"#ffffff",borderRadius:4,fontSize:"16px",paddingV:12,paddingH:24,align:"center",padding:"10px 0"}},{type:"image",label:"Image",icon:"format-image",category:"content",defaultAttributes:{url:"",alt:"",width:"100%",align:"center",padding:"10px 0"}},{type:"divider",label:"Divider",icon:"minus",category:"content",defaultAttributes:{color:"#dddddd",thickness:1,style:"solid",padding:"20px 0"}},{type:"spacer",label:"Spacer",icon:"arrow-up-alt",category:"content",defaultAttributes:{height:20,backgroundColor:"transparent"}},{type:"social-icons",label:"Social Icons",icon:"share",category:"content",defaultAttributes:{icons:[],iconSize:32,align:"center",padding:"20px 0",spacing:10}},{type:"footer",label:"Footer",icon:"align-wide",category:"content",defaultAttributes:{backgroundColor:"#f4f4f4",textColor:"#666666",content:"",padding:"30px 20px",align:"center",fontSize:"12px"}},{type:"conditional-content",label:"Conditional Content",icon:"filter",category:"content",defaultAttributes:{field:"",operator:"not_empty",value:"",padding:"0"},canHaveChildren:!0,requiresPro:!0},{type:"placeholder-confirm-link",label:"Confirmation Link",icon:"admin-links",category:"placeholder",defaultAttributes:{display:"button",buttonText:"Confirm",backgroundColor:"#0073aa",textColor:"#ffffff",align:"center",padding:"10px 0"}},{type:"placeholder-optout-link",label:"Opt-out Link",icon:"dismiss",category:"placeholder",defaultAttributes:{display:"inline",align:"center",padding:"10px 0"}},{type:"placeholder-date",label:"Form Date",icon:"calendar",category:"placeholder",defaultAttributes:{display:"inline"}},{type:"placeholder-time",label:"Form Time",icon:"clock",category:"placeholder",defaultAttributes:{display:"inline"}},{type:"placeholder-url",label:"Form URL",icon:"admin-site",category:"placeholder",defaultAttributes:{display:"inline"}},{type:"placeholder-custom",label:"Custom Field",icon:"admin-post",category:"placeholder",defaultAttributes:{display:"inline",fieldName:"your-name"}}],gn=({parentId:e,insertIndex:t,context:n,columnIndex:o})=>{const[a,l]=(0,r.useState)(!1),i=(0,r.useRef)(null),s=(0,r.useRef)(null),{addBlock:c}=mn(),d=(e=>{switch(e){case"root":return pn.filter(e=>"email-wrapper"===e.type||"row"===e.type);case"wrapper":return pn.filter(e=>"row"===e.type||"content"===e.category||"placeholder"===e.category);case"row":return pn.filter(e=>"columns-1"===e.type||"columns-2"===e.type||"columns-2-sidebar"===e.type||"columns-3"===e.type);case"column":case"container":return pn.filter(e=>"content"===e.category||"placeholder"===e.category);default:return[]}})(n);return(0,r.useEffect)(()=>{if(!a)return;const e=e=>{i.current&&!i.current.contains(e.target)&&s.current&&!s.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[a]),0===d.length?null:(0,r.createElement)("div",{className:"doi-inline-inserter",onClick:e=>e.stopPropagation()},(0,r.createElement)("div",{className:"doi-inserter-line"}),(0,r.createElement)("button",{ref:s,className:"doi-inserter-btn",onClick:e=>{e.stopPropagation(),e.preventDefault(),l(!a)},type:"button",title:"Add block"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"12",height:"12"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"}))),a&&(0,r.createElement)("div",{ref:i,className:"doi-inserter-popover"},(0,r.createElement)("div",{className:"doi-inserter-popover-content"},d.map(n=>(0,r.createElement)("button",{key:n.type,className:"doi-inserter-option",onClick:()=>(n=>{const r={id:"",type:n.type,attributes:{...n.defaultAttributes},children:n.canHaveChildren?[]:void 0};void 0!==o&&(r.attributes={...r.attributes,_columnIndex:o}),c(r,e,t),l(!1)})(n),type:"button"},n.label)))))},hn=({block:e,parentId:t})=>{const{selectedBlockId:n,hoveredBlockId:o,selectBlock:a,hoverBlock:l,deleteBlock:i,duplicateBlock:s,moveBlock:c}=mn(),d=n===e.id,u=o===e.id,{attributes:m,listeners:p,setNodeRef:g,transform:v,transition:b,isDragging:f}=function(e){let{animateLayoutChanges:t=Wt,attributes:n,disabled:o,data:a,getNewIndex:l=Pt,id:i,strategy:s,resizeObserverConfig:c,transition:d=jt}=e;const{items:u,containerId:m,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:f,useDragOverlay:y,strategy:E}=(0,r.useContext)(Ot),k=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(o,g),x=u.indexOf(i),C=(0,r.useMemo)(()=>({sortable:{containerId:m,index:x,items:u},...a}),[m,a,x,u]),w=(0,r.useMemo)(()=>u.slice(u.indexOf(i)),[u,i]),{rect:N,node:L,isOver:D,setNodeRef:R}=bt({id:i,data:C,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...c}}),{active:T,activatorEvent:I,activeNodeRect:B,attributes:A,setNodeRef:$,listeners:O,isDragging:z,over:P,setActivatorNodeRef:W,transform:j}=gt({id:i,data:C,attributes:{...Ut,...n},disabled:k.draggable}),H=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(R,$),F=Boolean(T),U=F&&!v&&Tt(p)&&Tt(f),_=!y&&z,V=_&&U?j:null,Y=U?null!=V?V:(null!=s?s:E)({rects:b,activeNodeRect:B,activeIndex:p,overIndex:f,index:x}):null,X=Tt(p)&&Tt(f)?l({id:i,items:u,activeIndex:p,overIndex:f}):x,K=null==T?void 0:T.id,J=(0,r.useRef)({activeId:K,items:u,newIndex:X,containerId:m}),q=u!==J.current.items,G=t({active:T,containerId:m,isDragging:z,isSorting:F,id:i,index:x,items:u,newIndex:J.current.newIndex,previousItems:J.current.items,previousContainerId:J.current.containerId,transition:d,wasDragging:null!=J.current.activeId}),Z=function(e){let{disabled:t,index:n,node:o,rect:a}=e;const[l,i]=(0,r.useState)(null),s=(0,r.useRef)(n);return h(()=>{if(!t&&n!==s.current&&o.current){const e=a.current;if(e){const t=ee(o.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&i(n)}}n!==s.current&&(s.current=n)},[t,n,o,a]),(0,r.useEffect)(()=>{l&&i(null)},[l]),l}({disabled:!G,index:x,node:L,rect:N});return(0,r.useEffect)(()=>{F&&J.current.newIndex!==X&&(J.current.newIndex=X),m!==J.current.containerId&&(J.current.containerId=m),u!==J.current.items&&(J.current.items=u)},[F,X,m,u]),(0,r.useEffect)(()=>{if(K===J.current.activeId)return;if(K&&!J.current.activeId)return void(J.current.activeId=K);const e=setTimeout(()=>{J.current.activeId=K},50);return()=>clearTimeout(e)},[K]),{active:T,activeIndex:p,attributes:A,data:C,rect:N,index:x,newIndex:X,items:u,isOver:D,isSorting:F,isDragging:z,listeners:O,node:L,overIndex:f,over:P,setNodeRef:H,setActivatorNodeRef:W,setDroppableNodeRef:R,setDraggableNodeRef:$,transform:null!=Z?Z:Y,transition:Z||q&&J.current.newIndex===x?Ft:_&&!S(I)||!d?void 0:F||G?M.Transition.toString({...d,property:Ht}):void 0}}({id:e.id,data:{block:e,parentId:t}}),y={transform:M.Transform.toString(v),transition:b,opacity:f?.5:1},E=["doi-canvas-block",d&&"doi-selected",u&&"doi-hovered",f&&"doi-dragging"].filter(Boolean).join(" "),k=(e.children,["columns-1","columns-2","columns-2-sidebar","columns-3"].includes(e.type)),x=["email-wrapper","row"].includes(e.type),C="conditional-content"===e.type;return(0,r.createElement)("div",{ref:g,style:y,className:E,onClick:t=>{t.stopPropagation(),a(e.id)},onMouseEnter:()=>l(e.id),onMouseLeave:()=>l(null)},(d||u)&&(0,r.createElement)("div",{className:"doi-block-toolbar",onClick:e=>e.stopPropagation()},(0,r.createElement)("button",{className:"doi-block-toolbar-btn doi-drag-handle",...m,...p,title:"Drag to reorder"},(0,r.createElement)("svg",{className:"doi-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"}))),(0,r.createElement)("button",{className:"doi-block-toolbar-btn",onClick:t=>{t.stopPropagation(),t.preventDefault(),c(e.id,"up")},title:"Move Up",type:"button"},(0,r.createElement)("svg",{className:"doi-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}))),(0,r.createElement)("button",{className:"doi-block-toolbar-btn",onClick:t=>{t.stopPropagation(),t.preventDefault(),c(e.id,"down")},title:"Move Down",type:"button"},(0,r.createElement)("svg",{className:"doi-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),(0,r.createElement)("button",{className:"doi-block-toolbar-btn",onClick:t=>{t.stopPropagation(),t.preventDefault(),s(e.id)},title:"Duplicate",type:"button"},(0,r.createElement)("svg",{className:"doi-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"}))),(0,r.createElement)("button",{className:"doi-block-toolbar-btn doi-delete-btn",onClick:t=>{t.stopPropagation(),t.preventDefault(),i(e.id)},title:"Delete",type:"button"},(0,r.createElement)("svg",{className:"doi-icon-sm",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})))),k?(0,r.createElement)(fn,{block:e}):x?(0,r.createElement)(bn,{block:e}):C?(0,r.createElement)(yn,{block:e}):(0,r.createElement)(En,{block:e}))},vn=({id:e,parentId:t,children:n,label:a,style:l,inserterContext:i,columnIndex:s})=>{const{setNodeRef:c,isOver:d}=bt({id:e,data:{type:"column-drop-zone",parentId:t,accepts:!0}}),u=n.map(e=>e.id),m=i||"column";return(0,r.createElement)("div",{ref:c,className:"doi-column-drop-zone "+(d?"doi-drop-active":""),style:l},0===n.length?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"doi-column-empty"},(0,r.createElement)("span",null,a||"Drop blocks here")),(0,r.createElement)(gn,{parentId:t,insertIndex:0,context:m,columnIndex:s})):(0,r.createElement)(zt,{items:u,strategy:At},(0,r.createElement)(gn,{parentId:t,insertIndex:0,context:m,columnIndex:s}),n.map((e,n)=>(0,r.createElement)(o().Fragment,{key:e.id},(0,r.createElement)(hn,{block:e,parentId:t}),(0,r.createElement)(gn,{parentId:t,insertIndex:n+1,context:m,columnIndex:s})))))},bn=({block:e})=>{const t=e.attributes,n=e.children||[],o="email-wrapper"===e.type?"wrapper":"row";return(0,r.createElement)("div",{className:"doi-block-container",style:{backgroundColor:t.backgroundColor||"transparent",padding:t.padding||"10px",minHeight:"60px"}},(0,r.createElement)("span",{className:"doi-block-type-label"},"email-wrapper"===e.type?"Wrapper":"Row"),(0,r.createElement)(vn,{id:`dropzone-${e.id}`,parentId:e.id,children:n,label:"Drop blocks here",inserterContext:o}))},fn=({block:e})=>{const{addColumnToBlock:t}=mn(),n=e.attributes,o=e.children||[],a=n.columnWidths;let l=[];if(a&&a.length>0){const e=["Left","Center","Right","Col 4","Col 5","Col 6"];l=a.map((t,n)=>({width:`${t}%`,label:e[n]||`Col ${n+1}`}))}else switch(e.type){case"columns-1":l=[{width:"100%",label:"Column"}];break;case"columns-2":l=[{width:"50%",label:"Left"},{width:"50%",label:"Right"}];break;case"columns-2-sidebar":l="30-70"===(n.layout||"70-30")?[{width:"30%",label:"Sidebar"},{width:"70%",label:"Main"}]:[{width:"70%",label:"Main"},{width:"30%",label:"Sidebar"}];break;case"columns-3":l=[{width:"33.33%",label:"Left"},{width:"33.33%",label:"Center"},{width:"33.33%",label:"Right"}]}return(0,r.createElement)("div",{className:"doi-block-columns-container",style:{backgroundColor:n.backgroundColor||"transparent"}},(0,r.createElement)("span",{className:"doi-block-type-label"},e.type.replace("columns-","")," Column(s)"),(0,r.createElement)("div",{className:"doi-columns-wrapper"},l.map((t,n)=>{return(0,r.createElement)("div",{key:n,className:"doi-column",style:{width:t.width}},(0,r.createElement)(vn,{id:`dropzone-${e.id}-col-${n}`,parentId:e.id,children:(a=n,o.filter(e=>e.attributes._columnIndex===a||0===a&&void 0===e.attributes._columnIndex)),label:t.label,style:{minHeight:"80px"},inserterContext:"column",columnIndex:n}));var a}),l.length<6&&(0,r.createElement)("button",{className:"doi-add-column-btn",onClick:n=>{n.stopPropagation(),t(e.id)},title:"Add column",type:"button"},"+")))},yn=({block:e})=>{const t=e.attributes,n=e.children||[],o=t.field||"(no field)",a=t.operator||"not_empty",l=`IF ${o} ${{equals:"=",not_equals:"!=",contains:"contains",not_empty:"is not empty",empty:"is empty"}[a]||a}${"not_empty"!==a&&"empty"!==a?` "${t.value||""}"`:""}`;return(0,r.createElement)("div",{className:"doi-conditional-content-block",style:{padding:t.padding||"0"}},(0,r.createElement)("span",{className:"doi-conditional-content-label"},l),(0,r.createElement)(vn,{id:`dropzone-${e.id}`,parentId:e.id,children:n,label:"Drop content blocks here",inserterContext:"container"}))},En=({block:e})=>{const t=e.attributes;switch(e.type){case"header":return(0,r.createElement)("div",{style:{backgroundColor:t.backgroundColor||"#0073aa",padding:t.padding||"30px 20px",textAlign:t.align||"center"}},t.logoUrl?(0,r.createElement)("img",{src:t.logoUrl,alt:t.logoAlt||"Logo",style:{maxWidth:t.logoWidth||200,height:"auto"}}):(0,r.createElement)("h1",{style:{margin:0,color:"#ffffff",fontSize:"24px"}},"Your Logo"));case"heading":{const e=`h${Math.min(6,Math.max(1,t.level||2))}`;return(0,r.createElement)(e,{style:{margin:0,padding:t.padding||"10px 0",color:t.color||"#333333",textAlign:t.align||"left",fontSize:t.fontSize||void 0}},t.text||"Heading")}case"text":return(0,r.createElement)("div",{style:{margin:0,padding:t.padding||"10px 0",color:t.color||"#333333",fontSize:t.fontSize||"16px",lineHeight:t.lineHeight||"1.5",textAlign:t.align||"left"},dangerouslySetInnerHTML:{__html:t.content||"Enter your text here..."}});case"button":{const e=t.width||"auto";return(0,r.createElement)("div",{style:{padding:t.padding||"10px 0",textAlign:t.align||"center"}},(0,r.createElement)("span",{style:{display:"inline-block",padding:`${t.paddingV||12}px ${t.paddingH||24}px`,backgroundColor:t.backgroundColor||"#0073aa",color:t.textColor||"#ffffff",borderRadius:`${t.borderRadius||4}px`,fontSize:t.fontSize||"16px",fontWeight:"bold",cursor:"default",whiteSpace:"nowrap",width:"auto"!==e?e:void 0,boxSizing:"auto"!==e?"border-box":void 0,textAlign:"auto"!==e?"center":void 0}},t.text||"Click Here"))}case"image":return(0,r.createElement)("div",{style:{padding:t.padding||"10px 0",textAlign:t.align||"center"}},t.url?(0,r.createElement)("img",{src:t.url,alt:t.alt||"",style:{maxWidth:"100%",height:"auto"}}):(0,r.createElement)("div",{style:{backgroundColor:"#f0f0f1",padding:"40px",color:"#666",textAlign:"center"}},"Add an image"));case"divider":return(0,r.createElement)("div",{style:{padding:t.padding||"20px 0"}},(0,r.createElement)("hr",{style:{border:"none",borderTop:`${t.thickness||1}px ${t.style||"solid"} ${t.color||"#dddddd"}`,margin:0}}));case"spacer":{const e=t.backgroundColor||"transparent";return(0,r.createElement)("div",{style:{height:`${t.height||20}px`,backgroundColor:"transparent"!==e?e:"rgba(0, 115, 170, 0.1)"}})}case"social-icons":{const e=t.icons||[];return(0,r.createElement)("div",{style:{padding:t.padding||"20px 0",textAlign:t.align||"center"}},e.length>0?e.map((e,n)=>(0,r.createElement)("span",{key:n,style:{display:"inline-block",width:`${t.iconSize||32}px`,height:`${t.iconSize||32}px`,backgroundColor:"#666",borderRadius:"50%",margin:`0 ${t.spacing||10}px`}})):(0,r.createElement)("span",{style:{color:"#999"}},"Add social icons"))}case"footer":return(0,r.createElement)("div",{style:{backgroundColor:t.backgroundColor||"#f4f4f4",padding:t.padding||"30px 20px",textAlign:t.align||"center"}},(0,r.createElement)("p",{style:{margin:0,color:t.textColor||"#666666",fontSize:t.fontSize||"12px"},dangerouslySetInnerHTML:{__html:t.content||`&copy; ${(new Date).getFullYear()} Your Company. All rights reserved.`}}));case"placeholder-confirm-link":case"placeholder-optout-link":case"placeholder-date":case"placeholder-time":case"placeholder-url":case"placeholder-custom":{const n={"placeholder-confirm-link":"[doubleoptinlink]","placeholder-optout-link":"[doubleoptoutlink]","placeholder-date":"[doubleoptin_form_date]","placeholder-time":"[doubleoptin_form_time]","placeholder-url":"[doubleoptin_form_url]","placeholder-custom":`[${t.fieldName||"field_name"}]`}[e.type];return"button"===(t.display||"inline")?(0,r.createElement)("div",{style:{padding:t.padding||"10px 0",textAlign:t.align||"center"}},(0,r.createElement)("span",{style:{display:"inline-block",padding:"12px 24px",backgroundColor:t.backgroundColor||"#0073aa",color:t.textColor||"#ffffff",borderRadius:"4px",fontWeight:"bold",cursor:"default"}},t.buttonText||"Confirm")):(0,r.createElement)("span",{style:{backgroundColor:"#e0f0ff",padding:"2px 6px",borderRadius:"3px",fontFamily:"monospace",fontSize:"14px"}},n)}default:return(0,r.createElement)("div",{style:{padding:"10px",backgroundColor:"#f0f0f1",color:"#666"}},"Unknown block type: ",e.type)}},kn=({onClose:e,blockLabel:t})=>{const n=window.doiEmailEditor?.i18n||{},o=window.doiEmailEditor?.upgradeUrl||"#";return(0,r.createElement)("div",{className:"doi-upgrade-overlay",onClick:e},(0,r.createElement)("div",{className:"doi-upgrade-prompt",onClick:e=>e.stopPropagation()},(0,r.createElement)("button",{className:"doi-upgrade-close",onClick:e,"aria-label":"Close"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"20",height:"20"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),(0,r.createElement)("div",{className:"doi-upgrade-icon"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"48",height:"48"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}))),(0,r.createElement)("h3",{className:"doi-upgrade-title"},n.proFeature||"Pro Feature"),(0,r.createElement)("p",{className:"doi-upgrade-text"},t?(n.proBlockMessage||'The "{block}" block requires the Pro version.').replace("{block}",t):n.proUpgradeMessage||"This feature requires the Pro version."),(0,r.createElement)("div",{className:"doi-upgrade-actions"},(0,r.createElement)("a",{href:o,className:"doi-upgrade-btn",target:"_blank",rel:"noopener noreferrer"},n.upgradeToPro||"Upgrade to Pro"),(0,r.createElement)("button",{className:"doi-upgrade-dismiss",onClick:e},n.maybeLater||"Maybe Later"))))},xn=()=>{const{blocks:e,globalStyles:t,previewMode:n,selectBlock:a}=mn(),{setNodeRef:l,isOver:i}=bt({id:"canvas-root",data:{accepts:!0}}),s=(0,r.useMemo)(()=>e.map(e=>e.id),[e]),c={backgroundColor:t.backgroundColor,maxWidth:`${t.contentWidth}px`,fontFamily:t.fontFamily,color:t.textColor};return n?(0,r.createElement)(wn,null):(0,r.createElement)("div",{className:"doi-canvas-wrapper",onClick:e=>{e.target===e.currentTarget&&a(null)}},(0,r.createElement)("div",{className:"doi-canvas",style:c},(0,r.createElement)("div",{ref:l,className:"doi-canvas-drop-zone "+(i?"doi-drop-active":"")},0===e.length?(0,r.createElement)(Cn,null):(0,r.createElement)(zt,{items:s,strategy:At},(0,r.createElement)(gn,{parentId:void 0,insertIndex:0,context:"root"}),e.map((e,t)=>(0,r.createElement)(o().Fragment,{key:e.id},(0,r.createElement)(hn,{block:e}),(0,r.createElement)(gn,{parentId:void 0,insertIndex:t+1,context:"root"})))))))},Cn=()=>{const e=window.doiEmailEditor?.i18n||{};return(0,r.createElement)("div",{className:"doi-canvas-empty"},(0,r.createElement)("svg",{className:"doi-empty-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})),(0,r.createElement)("p",{className:"doi-empty-title"},e.startWithStructure||"Start with a structure"),(0,r.createElement)("p",{className:"doi-empty-text"},e.emptyCanvasHint||"Drag a Row or Columns block here first, then add content inside"),(0,r.createElement)("div",{className:"doi-empty-hint"},(0,r.createElement)("span",{className:"doi-hint-arrow"},"1.")," Structure (Row, Columns)",(0,r.createElement)("span",{className:"doi-hint-arrow"},""),(0,r.createElement)("span",{className:"doi-hint-arrow"},"2.")," Content (Text, Button, Image)"))},wn=()=>{var e;const{setPreviewMode:t,previewDevice:n,setPreviewDevice:o,blocks:a,globalStyles:l}=mn(),i=window.doiEmailEditor?.i18n||{},s=null!==(e=window.doiEmailEditor?.isProActive)&&void 0!==e&&e,[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>Zt(a,l),[a,l]);return(0,r.createElement)("div",{className:"doi-preview-modal",onClick:()=>t(!1)},(0,r.createElement)("div",{className:"doi-preview-content",onClick:e=>e.stopPropagation()},(0,r.createElement)("div",{className:"doi-preview-header"},(0,r.createElement)("h3",{className:"doi-preview-title"},i.preview||"Preview"),(0,r.createElement)("div",{className:"doi-preview-device-toggle"},(0,r.createElement)("button",{className:"doi-preview-device-btn "+("desktop"===n?"doi-preview-device-btn-active":""),onClick:()=>o("desktop"),type:"button"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"16",height:"16"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),i.desktop||"Desktop"),(0,r.createElement)("button",{className:"doi-preview-device-btn "+("mobile"===n?"doi-preview-device-btn-active":""),onClick:()=>{s?o("mobile"):d(!0)},type:"button"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"16",height:"16"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})),i.mobile||"Mobile",!s&&(0,r.createElement)("span",{className:"doi-pro-badge",style:{position:"static",marginLeft:"4px"}},"PRO"))),(0,r.createElement)("button",{onClick:()=>t(!1),className:"doi-btn-icon",type:"button"},(0,r.createElement)("svg",{className:"doi-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),(0,r.createElement)("div",{className:"doi-preview-body"},(0,r.createElement)("iframe",{className:"doi-preview-iframe "+("mobile"===n?"doi-preview-iframe-mobile":""),srcDoc:u,title:"Email Preview"}))),c&&(0,r.createElement)(kn,{onClose:()=>d(!1)}))},Nn=()=>{const e=window.doiEmailEditor?.i18n||{},t=window.doiEmailEditor?.placeholders||[],[n,o]=(0,r.useState)(null),a=pn.filter(e=>"structure"===e.category),l=pn.filter(e=>"content"===e.category),i=pn.filter(e=>"placeholder"===e.category),s=t.filter(e=>"form_fields"===e.category),c=t.filter(e=>"system"===e.category),d=e=>{o(e)};return(0,r.createElement)("div",{className:"doi-block-library"},(0,r.createElement)("div",{className:"doi-library-hint"},(0,r.createElement)("span",{className:"doi-hint-step"},"1"),(0,r.createElement)("span",null,e.structureHint||"First, add a structure")),(0,r.createElement)(Sn,{title:e.structure||"Structure",blocks:a,onLockedClick:d}),(0,r.createElement)("div",{className:"doi-library-hint doi-library-hint-secondary"},(0,r.createElement)("span",{className:"doi-hint-step"},"2"),(0,r.createElement)("span",null,e.contentHint||"Then, add content inside")),(0,r.createElement)(Sn,{title:e.content||"Content",blocks:l,onLockedClick:d}),(0,r.createElement)(Sn,{title:e.placeholders||"Placeholders",blocks:i,onLockedClick:d}),s.length>0&&(0,r.createElement)("div",{className:"doi-block-category"},(0,r.createElement)("h4",{className:"doi-block-category-title"},e.standardPlaceholders||"Standard Fields"),(0,r.createElement)("p",{className:"doi-placeholder-hint"},e.standardPlaceholdersDesc||"Drag to insert field placeholder"),(0,r.createElement)("div",{className:"doi-block-grid"},s.map(e=>(0,r.createElement)(Mn,{key:e.tag,placeholder:e})))),c.length>0&&(0,r.createElement)("div",{className:"doi-block-category"},(0,r.createElement)("h4",{className:"doi-block-category-title"},e.systemPlaceholders||"System Fields"),(0,r.createElement)("div",{className:"doi-block-grid"},c.map(e=>(0,r.createElement)(Mn,{key:e.tag,placeholder:e})))),n&&(0,r.createElement)(kn,{onClose:()=>o(null),blockLabel:n}))},Sn=({title:e,blocks:t,onLockedClick:n})=>(0,r.createElement)("div",{className:"doi-block-category"},(0,r.createElement)("h4",{className:"doi-block-category-title"},e),(0,r.createElement)("div",{className:"doi-block-grid"},t.map(e=>(0,r.createElement)(Ln,{key:e.type,definition:e,onLockedClick:n})))),Ln=({definition:e,onLockedClick:t})=>{const n=(e=>{const t=window.doiEmailEditor?.blockAvailability;return!(!t||!t[e])&&t[e].requiresPro})(e.type)&&!(e=>{const t=window.doiEmailEditor?.blockAvailability;return!t||!t[e]||t[e].available})(e.type),{attributes:o,listeners:a,setNodeRef:l,isDragging:i}=gt({id:`library-${e.type}`,data:{type:"library-block",block:{id:"",type:e.type,attributes:{...e.defaultAttributes},children:e.canHaveChildren?[]:void 0}},disabled:n});return n?(0,r.createElement)("div",{className:"doi-block-item doi-block-item-locked",onClick:()=>t(e.label),title:window.doiEmailEditor?.i18n?.proFeature||"Pro Feature"},(0,r.createElement)(Rn,{icon:e.icon}),(0,r.createElement)("span",{className:"doi-block-item-label"},e.label),(0,r.createElement)("span",{className:"doi-pro-badge"},"PRO"),(0,r.createElement)(Dn,null)):(0,r.createElement)("div",{ref:l,className:"doi-block-item "+(i?"doi-opacity-50":""),...o,...a},(0,r.createElement)(Rn,{icon:e.icon}),(0,r.createElement)("span",{className:"doi-block-item-label"},e.label))},Mn=({placeholder:e})=>{const{attributes:t,listeners:n,setNodeRef:o,isDragging:a}=gt({id:`placeholder-${e.tag}`,data:{type:"library-block",block:{id:"",type:"text",attributes:{content:e.tag,color:"#333333",fontSize:"16px",lineHeight:"1.5",align:"left",padding:"10px 0"}}}});return(0,r.createElement)("div",{ref:o,className:"doi-block-item doi-placeholder-block-item "+(a?"doi-opacity-50":""),...t,...n,title:e.description},(0,r.createElement)(Rn,{icon:(l=e.tag,l.includes("email")?"email":l.includes("name")?"user":l.includes("phone")?"phone":l.includes("company")?"building":l.includes("message")?"message":l.includes("link")?"admin-links":l.includes("date")?"calendar":l.includes("time")?"clock":l.includes("url")?"admin-site":"admin-post")}),(0,r.createElement)("span",{className:"doi-block-item-label"},e.label),(0,r.createElement)("code",{className:"doi-placeholder-tag-mini"},e.tag));var l},Dn=()=>(0,r.createElement)("div",{className:"doi-lock-icon"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"}))),Rn=({icon:e})=>{const t={email:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),user:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),phone:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),building:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})),message:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),layout:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})),minus:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 12H4"})),columns:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 4H5a1 1 0 00-1 1v14a1 1 0 001 1h4a1 1 0 001-1V5a1 1 0 00-1-1zM19 4h-4a1 1 0 00-1 1v14a1 1 0 001 1h4a1 1 0 001-1V5a1 1 0 00-1-1z"})),heading:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h8m-8 6h16"})),"editor-paragraph":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h7"})),button:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})),"format-image":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})),share:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})),"align-wide":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 5h16M4 19h16M4 9h8M4 15h8"})),"arrow-up-alt":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h8M8 12h8M8 17h8"})),"admin-links":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})),dismiss:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})),calendar:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),clock:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})),"admin-site":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})),"admin-post":(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})),filter:(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"}))};return(0,r.createElement)("div",{className:"doi-block-item-icon"},t[e]||t.layout)},Tn=({value:e,onChange:t,placeholder:n})=>{const o=(0,r.useRef)(null),[a,l]=(0,r.useState)(!1),[i,s]=(0,r.useState)(""),c=(0,r.useRef)(null),d=(0,r.useRef)(!1);(0,r.useEffect)(()=>{o.current&&!d.current&&o.current.innerHTML!==e&&(o.current.innerHTML=e||"")},[e]);const u=(0,r.useCallback)(()=>{if(o.current){const e=o.current.innerHTML;t("<br>"===e||"<div><br></div>"===e?"":e)}},[t]),m=(0,r.useCallback)((e,t)=>{document.execCommand(e,!1,t),o.current?.focus(),u()},[u]),p=()=>m("bold"),g=()=>m("italic"),h=()=>m("underline"),v=()=>{if(c.current){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(c.current))}},b=()=>{i&&(v(),m("createLink",i)),l(!1),s("")},f=()=>{l(!1),s(""),v(),o.current?.focus()};return(0,r.createElement)("div",{className:"doi-rte-wrapper"},(0,r.createElement)("div",{className:"doi-rte-toolbar"},(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:p,title:"Bold (Ctrl+B)"},(0,r.createElement)("strong",null,"B")),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:g,title:"Italic (Ctrl+I)"},(0,r.createElement)("em",null,"I")),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:h,title:"Underline (Ctrl+U)"},(0,r.createElement)("u",null,"U")),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>m("strikethrough"),title:"Strikethrough"},(0,r.createElement)("s",null,"S")),(0,r.createElement)("span",{className:"doi-rte-separator"}),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>{(()=>{const e=window.getSelection();e&&e.rangeCount>0&&(c.current=e.getRangeAt(0).cloneRange())})(),s(""),l(!0)},title:"Insert Link"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"}))),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>m("unlink"),title:"Remove Link"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636"}))),(0,r.createElement)("span",{className:"doi-rte-separator"}),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>m("insertUnorderedList"),title:"Bullet List"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"}))),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>m("insertOrderedList"),title:"Numbered List"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h7"}))),(0,r.createElement)("span",{className:"doi-rte-separator"}),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:()=>{m("insertHTML","<br>")},title:"Line Break (Shift+Enter)"},"<br>"),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn doi-rte-btn-clear",onClick:()=>m("removeFormat"),title:"Remove Formatting"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),a&&(0,r.createElement)("div",{className:"doi-rte-link-input"},(0,r.createElement)("input",{type:"url",className:"doi-settings-input",placeholder:"https://example.com",value:i,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),b()),"Escape"===e.key&&f()},autoFocus:!0}),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:b,title:"Apply"},""),(0,r.createElement)("button",{type:"button",className:"doi-rte-btn",onClick:f,title:"Cancel"},"")),(0,r.createElement)("div",{ref:o,className:"doi-rte-content",contentEditable:!0,suppressContentEditableWarning:!0,onInput:u,onBlur:()=>{d.current=!1,u()},onFocus:()=>{d.current=!0},onKeyDown:e=>{(e.ctrlKey||e.metaKey)&&("b"===e.key&&(e.preventDefault(),p()),"i"===e.key&&(e.preventDefault(),g()),"u"===e.key&&(e.preventDefault(),h()))},"data-placeholder":n||"Enter your text here..."}))},In=()=>{const{blocks:e,selectedBlockId:t,updateBlock:n,selectBlock:o,addColumnToBlock:a,removeColumnFromBlock:l}=mn(),i=(window.doiEmailEditor,(e,t)=>{for(const n of e){if(n.id===t)return n;if(n.children){const e=i(n.children,t);if(e)return e}}return null}),s=t?i(e,t):null;if(!s)return(0,r.createElement)("div",{className:"doi-text-gray-500 doi-text-center doi-py-8"},"Select a block to edit its settings");const c=(e,t)=>{n(s.id,{[e]:t})};return(0,r.createElement)("div",{className:"doi-block-settings"},(0,r.createElement)("div",{className:"doi-flex doi-items-center doi-justify-between doi-mb-4"},(0,r.createElement)("h3",{className:"doi-text-sm doi-font-semibold doi-text-gray-700"},$n(s.type)),(0,r.createElement)("button",{onClick:()=>o(null),className:"doi-text-gray-400 hover:doi-text-gray-600"},(0,r.createElement)("svg",{className:"doi-w-5 doi-h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),(0,r.createElement)(Bn,{block:s,onChange:c,onAddColumn:a,onRemoveColumn:l}),(0,r.createElement)(An,{block:s,onChange:c}))},Bn=({block:e,onChange:t,onAddColumn:n,onRemoveColumn:o})=>{const a=e.attributes;switch(e.type){case"email-wrapper":case"row":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"#ffffff",onChange:e=>t("backgroundColor",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"20px",onChange:e=>t("padding",e),placeholder:"e.g., 20px or 10px 20px"}));case"columns-1":case"columns-2":case"columns-2-sidebar":case"columns-3":{On(e.type);const l=zn(e.type,a.layout||"70-30"),i=a.columnWidths||l;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"transparent",onChange:e=>t("backgroundColor",e)}),"columns-2-sidebar"===e.type&&!a.columnWidths&&(0,r.createElement)(jn,{label:"Layout",value:a.layout||"70-30",options:[{value:"70-30",label:"70% / 30%"},{value:"30-70",label:"30% / 70%"}],onChange:e=>t("layout",e)}),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Column Widths"),i.map((n,a)=>(0,r.createElement)("div",{key:a,className:"doi-flex doi-items-center doi-gap-2 doi-mb-2"},(0,r.createElement)("span",{className:"doi-text-xs doi-text-gray-500 doi-w-16"},"Col ",a+1),(0,r.createElement)("input",{type:"number",className:"doi-settings-input",value:n,min:10,max:100,onChange:e=>{const n=parseInt(e.target.value,10)||10,r=[...i];r[a]=n,t("columnWidths",r)}}),(0,r.createElement)("span",{className:"doi-text-xs doi-text-gray-500"},"%"),i.length>1&&o&&(0,r.createElement)("button",{type:"button",className:"doi-text-red-500 hover:doi-text-red-700 doi-text-xs",onClick:()=>o(e.id,a),title:"Remove column"},(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),(()=>{const e=i.reduce((e,t)=>e+t,0);return 100!==e?(0,r.createElement)("div",{className:"doi-text-xs doi-text-orange-600 doi-mt-1"},"Total: ",e,"% (should be 100%)"):null})(),n&&i.length<6&&(0,r.createElement)("button",{type:"button",className:"doi-btn doi-btn-secondary doi-w-full doi-mt-2 doi-justify-center",onClick:()=>n(e.id)},"+ Add Column")))}case"header":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Logo URL",value:a.logoUrl||"",onChange:e=>t("logoUrl",e),placeholder:"https://example.com/logo.png"}),(0,r.createElement)(Pn,{label:"Logo Alt Text",value:a.logoAlt||"",onChange:e=>t("logoAlt",e)}),(0,r.createElement)(Wn,{label:"Logo Width",value:a.logoWidth||200,onChange:e=>t("logoWidth",e),min:50,max:500}),(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"#0073aa",onChange:e=>t("backgroundColor",e)}),(0,r.createElement)(Fn,{value:a.align||"center",onChange:e=>t("align",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"30px 20px",onChange:e=>t("padding",e)}));case"heading":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Text",value:a.text||"",onChange:e=>t("text",e)}),(0,r.createElement)(jn,{label:"Level",value:String(a.level||2),options:[{value:"1",label:"H1"},{value:"2",label:"H2"},{value:"3",label:"H3"},{value:"4",label:"H4"},{value:"5",label:"H5"},{value:"6",label:"H6"}],onChange:e=>t("level",parseInt(e,10))}),(0,r.createElement)(Hn,{label:"Color",value:a.color||"#333333",onChange:e=>t("color",e)}),(0,r.createElement)(Pn,{label:"Font Size",value:a.fontSize||"",onChange:e=>t("fontSize",e),placeholder:"e.g., 28px"}),(0,r.createElement)(Fn,{value:a.align||"left",onChange:e=>t("align",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"10px 0",onChange:e=>t("padding",e)}));case"text":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Content"),(0,r.createElement)(Tn,{value:a.content||"",onChange:e=>t("content",e),placeholder:"Enter your text here..."})),(0,r.createElement)(Hn,{label:"Color",value:a.color||"#333333",onChange:e=>t("color",e)}),(0,r.createElement)(Pn,{label:"Font Size",value:a.fontSize||"16px",onChange:e=>t("fontSize",e)}),(0,r.createElement)(Pn,{label:"Line Height",value:a.lineHeight||"1.5",onChange:e=>t("lineHeight",e)}),(0,r.createElement)(Fn,{value:a.align||"left",onChange:e=>t("align",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"10px 0",onChange:e=>t("padding",e)}));case"button":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Button Text",value:a.text||"",onChange:e=>t("text",e)}),(0,r.createElement)(Pn,{label:"URL",value:a.url||"",onChange:e=>t("url",e),placeholder:"https://example.com"}),(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"#0073aa",onChange:e=>t("backgroundColor",e)}),(0,r.createElement)(Hn,{label:"Text Color",value:a.textColor||"#ffffff",onChange:e=>t("textColor",e)}),(0,r.createElement)(jn,{label:"Width",value:a.width||"auto",options:[{value:"auto",label:"Auto"},{value:"100%",label:"Full Width"},{value:"75%",label:"75%"},{value:"50%",label:"50%"}],onChange:e=>t("width",e)}),(0,r.createElement)(Wn,{label:"Border Radius",value:a.borderRadius||4,onChange:e=>t("borderRadius",e),min:0,max:50}),(0,r.createElement)(Pn,{label:"Font Size",value:a.fontSize||"16px",onChange:e=>t("fontSize",e)}),(0,r.createElement)(Wn,{label:"Vertical Padding",value:a.paddingV||12,onChange:e=>t("paddingV",e),min:0,max:50}),(0,r.createElement)(Wn,{label:"Horizontal Padding",value:a.paddingH||24,onChange:e=>t("paddingH",e),min:0,max:100}),(0,r.createElement)(Fn,{value:a.align||"center",onChange:e=>t("align",e)}));case"image":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Image URL",value:a.url||"",onChange:e=>t("url",e),placeholder:"https://example.com/image.jpg"}),(0,r.createElement)(Pn,{label:"Alt Text",value:a.alt||"",onChange:e=>t("alt",e)}),(0,r.createElement)(Pn,{label:"Width",value:a.width||"100%",onChange:e=>t("width",e),placeholder:"e.g., 100% or 300"}),(0,r.createElement)(Pn,{label:"Link URL",value:a.link||"",onChange:e=>t("link",e)}),(0,r.createElement)(Fn,{value:a.align||"center",onChange:e=>t("align",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"10px 0",onChange:e=>t("padding",e)}));case"divider":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Hn,{label:"Color",value:a.color||"#dddddd",onChange:e=>t("color",e)}),(0,r.createElement)(Wn,{label:"Thickness",value:a.thickness||1,onChange:e=>t("thickness",e),min:1,max:10}),(0,r.createElement)(jn,{label:"Style",value:a.style||"solid",options:[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"}],onChange:e=>t("style",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"20px 0",onChange:e=>t("padding",e)}));case"spacer":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Wn,{label:"Height (px)",value:a.height||20,onChange:e=>t("height",e),min:10,max:100}),(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"transparent",onChange:e=>t("backgroundColor",e)}));case"footer":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Content"),(0,r.createElement)(Tn,{value:a.content||"",onChange:e=>t("content",e),placeholder:"Footer text..."})),(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"#f4f4f4",onChange:e=>t("backgroundColor",e)}),(0,r.createElement)(Hn,{label:"Text Color",value:a.textColor||"#666666",onChange:e=>t("textColor",e)}),(0,r.createElement)(Pn,{label:"Font Size",value:a.fontSize||"12px",onChange:e=>t("fontSize",e)}),(0,r.createElement)(Fn,{value:a.align||"center",onChange:e=>t("align",e)}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"30px 20px",onChange:e=>t("padding",e)}));case"placeholder-confirm-link":case"placeholder-optout-link":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(jn,{label:"Display As",value:a.display||"button",options:[{value:"inline",label:"Inline Text"},{value:"button",label:"Button"}],onChange:e=>t("display",e)}),"button"===a.display&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Button Text",value:a.buttonText||"Confirm",onChange:e=>t("buttonText",e)}),(0,r.createElement)(Hn,{label:"Background Color",value:a.backgroundColor||"#0073aa",onChange:e=>t("backgroundColor",e)}),(0,r.createElement)(Hn,{label:"Text Color",value:a.textColor||"#ffffff",onChange:e=>t("textColor",e)}),(0,r.createElement)(Fn,{value:a.align||"center",onChange:e=>t("align",e)})));case"placeholder-custom":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Field Name",value:a.fieldName||"your-name",onChange:e=>t("fieldName",e),placeholder:"e.g., your-email"}),(0,r.createElement)(jn,{label:"Display As",value:a.display||"inline",options:[{value:"inline",label:"Inline Text"},{value:"button",label:"Button"}],onChange:e=>t("display",e)}));case"conditional-content":return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(Pn,{label:"Field Name",value:a.field||"",onChange:e=>t("field",e),placeholder:"e.g., your-name"}),(0,r.createElement)(jn,{label:"Operator",value:a.operator||"not_empty",options:[{value:"equals",label:"Equals"},{value:"not_equals",label:"Not Equals"},{value:"contains",label:"Contains"},{value:"not_empty",label:"Not Empty"},{value:"empty",label:"Empty"}],onChange:e=>t("operator",e)}),"not_empty"!==a.operator&&"empty"!==a.operator&&(0,r.createElement)(Pn,{label:"Value",value:a.value||"",onChange:e=>t("value",e),placeholder:"Compare value"}),(0,r.createElement)(Pn,{label:"Padding",value:a.padding||"0",onChange:e=>t("padding",e),placeholder:"e.g., 10px"}));default:return(0,r.createElement)("div",{className:"doi-text-gray-500 doi-text-sm"},"No settings available for this block type.")}},An=({block:e,onChange:t})=>{var n;const[o,a]=(0,r.useState)(!1),l=window.doiEmailEditor?.i18n||{},i=null!==(n=window.doiEmailEditor?.isProActive)&&void 0!==n&&n;return(0,r.createElement)("div",{className:"doi-advanced-section"},(0,r.createElement)("button",{className:"doi-advanced-header",onClick:()=>a(!o),type:"button"},(0,r.createElement)("span",null,l.advanced||"Advanced",!i&&(0,r.createElement)("span",{className:"doi-pro-badge",style:{position:"static",marginLeft:"6px"}},"PRO")),(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14",style:{transform:o?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),o&&(0,r.createElement)("div",{className:"doi-advanced-body "+(i?"":"doi-advanced-locked")},(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},l.customCss||"Custom CSS"),(0,r.createElement)("textarea",{className:"doi-settings-textarea",value:e.attributes.customCss||"",onChange:e=>t("customCss",e.target.value),placeholder:l.customCssHint||"e.g., background: #fff; border: 1px solid #ccc;",disabled:!i}))))},$n=e=>({"email-wrapper":"Wrapper",row:"Row","columns-1":"1 Column","columns-2":"2 Columns","columns-2-sidebar":"2 Columns (Sidebar)","columns-3":"3 Columns",header:"Header",heading:"Heading",text:"Text",button:"Button",image:"Image",divider:"Divider",spacer:"Spacer","social-icons":"Social Icons",footer:"Footer","placeholder-confirm-link":"Confirmation Link","placeholder-optout-link":"Opt-out Link","placeholder-date":"Form Date","placeholder-time":"Form Time","placeholder-url":"Form URL","placeholder-custom":"Custom Field","conditional-content":"Conditional Content"}[e]||e),On=e=>{switch(e){case"columns-1":default:return 1;case"columns-2":case"columns-2-sidebar":return 2;case"columns-3":return 3}},zn=(e,t)=>{switch(e){case"columns-1":default:return[100];case"columns-2":return[50,50];case"columns-2-sidebar":return"30-70"===t?[30,70]:[70,30];case"columns-3":return[33,34,33]}},Pn=({label:e,value:t,onChange:n,placeholder:o})=>(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},e),(0,r.createElement)("input",{type:"text",className:"doi-settings-input",value:t,onChange:e=>n(e.target.value),placeholder:o})),Wn=({label:e,value:t,onChange:n,min:o,max:a})=>(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},e),(0,r.createElement)("input",{type:"number",className:"doi-settings-input",value:t,onChange:e=>n(parseInt(e.target.value,10)||0),min:o,max:a})),jn=({label:e,value:t,options:n,onChange:o})=>(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},e),(0,r.createElement)("select",{className:"doi-settings-select",value:t,onChange:e=>o(e.target.value)},n.map(e=>(0,r.createElement)("option",{key:e.value,value:e.value},e.label)))),Hn=({label:e,value:t,onChange:n})=>(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},e),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t,onChange:e=>n(e.target.value)}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t,onChange:e=>n(e.target.value)}))),Fn=({value:e,onChange:t})=>(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Alignment"),(0,r.createElement)("div",{className:"doi-flex doi-gap-2"},["left","center","right"].map(n=>(0,r.createElement)("button",{key:n,className:"doi-btn doi-btn-secondary doi-flex-1 "+(e===n?"doi-bg-gray-300":""),onClick:()=>t(n)},n.charAt(0).toUpperCase()+n.slice(1))))),Un=()=>{var e;const{globalStyles:t,setGlobalStyles:n}=mn(),o=window.doiEmailEditor?.i18n||{},a=null!==(e=window.doiEmailEditor?.isProActive)&&void 0!==e&&e,[l,i]=(0,r.useState)(!1);return(0,r.createElement)("div",{className:"doi-global-styles"},(0,r.createElement)("div",{className:"doi-brand-kit-section"},(0,r.createElement)("button",{className:"doi-brand-kit-header",onClick:()=>i(!l),type:"button"},(0,r.createElement)("span",null,o.brandKit||"Brand Kit",!a&&(0,r.createElement)("span",{className:"doi-pro-badge",style:{position:"static",marginLeft:"6px"}},"PRO")),(0,r.createElement)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",width:"14",height:"14",style:{transform:l?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),l&&(0,r.createElement)("div",{className:"doi-brand-kit-body "+(a?"":"doi-brand-kit-locked")},(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},o.brandLogo||"Logo URL"),(0,r.createElement)("input",{type:"text",className:"doi-settings-input",value:t.brandLogo||"",onChange:e=>n({brandLogo:e.target.value}),placeholder:"https://example.com/logo.png",disabled:!a})),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},o.brandLogoWidth||"Logo Width"),(0,r.createElement)("input",{type:"number",className:"doi-settings-input",value:t.brandLogoWidth||0,onChange:e=>n({brandLogoWidth:parseInt(e.target.value,10)||0}),min:50,max:500,disabled:!a})),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},o.brandColorPrimary||"Brand Primary Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.brandColorPrimary||"#0073aa",onChange:e=>n({brandColorPrimary:e.target.value}),disabled:!a}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.brandColorPrimary||"",onChange:e=>n({brandColorPrimary:e.target.value}),disabled:!a}))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},o.brandColorSecondary||"Brand Secondary Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.brandColorSecondary||"#f4f4f4",onChange:e=>n({brandColorSecondary:e.target.value}),disabled:!a}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.brandColorSecondary||"",onChange:e=>n({brandColorSecondary:e.target.value}),disabled:!a}))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},o.brandColorAccent||"Brand Accent Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.brandColorAccent||"#e6a817",onChange:e=>n({brandColorAccent:e.target.value}),disabled:!a}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.brandColorAccent||"",onChange:e=>n({brandColorAccent:e.target.value}),disabled:!a}))),a&&(0,r.createElement)("button",{className:"doi-btn doi-btn-primary",onClick:()=>{const e={};t.brandColorPrimary&&(e.primaryColor=t.brandColorPrimary,e.linkColor=t.brandColorPrimary),t.brandColorSecondary&&(e.backgroundColor=t.brandColorSecondary),Object.keys(e).length>0&&n(e)},type:"button",style:{width:"100%",justifyContent:"center"}},o.applyToTemplate||"Apply to Template"))),(0,r.createElement)("h3",{className:"doi-settings-title"},o.globalStyles||"Global Styles"),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Font Family"),(0,r.createElement)("select",{className:"doi-settings-select",value:t.fontFamily,onChange:e=>n({fontFamily:e.target.value})},(0,r.createElement)("option",{value:"Arial, Helvetica, sans-serif"},"Arial"),(0,r.createElement)("option",{value:"'Helvetica Neue', Helvetica, Arial, sans-serif"},"Helvetica Neue"),(0,r.createElement)("option",{value:"Georgia, serif"},"Georgia"),(0,r.createElement)("option",{value:"'Times New Roman', Times, serif"},"Times New Roman"),(0,r.createElement)("option",{value:"'Trebuchet MS', Helvetica, sans-serif"},"Trebuchet MS"),(0,r.createElement)("option",{value:"Verdana, Geneva, sans-serif"},"Verdana"),(0,r.createElement)("option",{value:"'Courier New', Courier, monospace"},"Courier New"))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Base Font Size"),(0,r.createElement)("select",{className:"doi-settings-select",value:t.fontSize,onChange:e=>n({fontSize:e.target.value})},(0,r.createElement)("option",{value:"12px"},"12px"),(0,r.createElement)("option",{value:"14px"},"14px"),(0,r.createElement)("option",{value:"16px"},"16px"),(0,r.createElement)("option",{value:"18px"},"18px"),(0,r.createElement)("option",{value:"20px"},"20px"))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Line Height"),(0,r.createElement)("select",{className:"doi-settings-select",value:t.lineHeight,onChange:e=>n({lineHeight:e.target.value})},(0,r.createElement)("option",{value:"1.2"},"1.2 (Tight)"),(0,r.createElement)("option",{value:"1.4"},"1.4"),(0,r.createElement)("option",{value:"1.5"},"1.5 (Normal)"),(0,r.createElement)("option",{value:"1.6"},"1.6"),(0,r.createElement)("option",{value:"1.8"},"1.8 (Relaxed)"))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Content Width (px)"),(0,r.createElement)("select",{className:"doi-settings-select",value:t.contentWidth,onChange:e=>n({contentWidth:e.target.value})},(0,r.createElement)("option",{value:"500"},"500px (Narrow)"),(0,r.createElement)("option",{value:"550"},"550px"),(0,r.createElement)("option",{value:"600"},"600px (Standard)"),(0,r.createElement)("option",{value:"650"},"650px"),(0,r.createElement)("option",{value:"700"},"700px (Wide)"))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Background Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.backgroundColor,onChange:e=>n({backgroundColor:e.target.value})}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.backgroundColor,onChange:e=>n({backgroundColor:e.target.value})}))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Primary Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.primaryColor,onChange:e=>n({primaryColor:e.target.value})}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.primaryColor,onChange:e=>n({primaryColor:e.target.value})}))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Text Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.textColor,onChange:e=>n({textColor:e.target.value})}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.textColor,onChange:e=>n({textColor:e.target.value})}))),(0,r.createElement)("div",{className:"doi-settings-field"},(0,r.createElement)("label",{className:"doi-settings-label"},"Link Color"),(0,r.createElement)("div",{className:"doi-color-picker"},(0,r.createElement)("input",{type:"color",className:"doi-color-swatch",value:t.linkColor,onChange:e=>n({linkColor:e.target.value})}),(0,r.createElement)("input",{type:"text",className:"doi-settings-input doi-color-input",value:t.linkColor,onChange:e=>n({linkColor:e.target.value})}))))},Vn=()=>{const{sidebarTab:e,setSidebarTab:t,selectedBlockId:n}=mn(),o=window.doiEmailEditor?.i18n||{};return(0,r.createElement)("div",{className:"doi-sidebar"},(0,r.createElement)("div",{className:"doi-sidebar-tabs"},(0,r.createElement)("button",{className:"doi-sidebar-tab "+("blocks"===e?"doi-active":""),onClick:()=>t("blocks")},o.blocks||"Blocks"),(0,r.createElement)("button",{className:"doi-sidebar-tab "+("settings"===e?"doi-active":""),onClick:()=>t("settings")},o.settings||"Settings")),(0,r.createElement)("div",{className:"doi-sidebar-content"},"blocks"===e?(0,r.createElement)(Nn,null):n?(0,r.createElement)(In,null):(0,r.createElement)(Un,null)))},Yn=()=>{const{templateTitle:e,setTemplateTitle:t,templateStatus:n,setTemplateStatus:o,templateId:a,isSaving:l,setIsSaving:i,isDirty:s,setIsDirty:c,previewMode:d,setPreviewMode:u,history:m,historyIndex:p,undo:g,redo:h,getTemplateData:v}=mn(),[b,f]=(0,r.useState)("idle"),[y,E]=(0,r.useState)(!1),[k,x]=(0,r.useState)(!1),[C,w]=(0,r.useState)(""),[N,S]=(0,r.useState)("idle"),L=window.doiEmailEditor?.i18n||{},M=window.doiEmailEditor,D=p>0,R=p<m.length-1,T=(0,r.useCallback)(async(e=!1)=>{if(l)return;if(e&&!a&&"publish"!==n){var t,r;const e=null!==(t=M?.templateLimit)&&void 0!==t?t:1/0;if((null!==(r=M?.templateCount)&&void 0!==r?r:0)>=e)return void E(!0)}i(!0),f("saving");const s=v();e&&(s.status="publish");try{const t=a?`${M.restUrl}/${a}`:M.restUrl,n=await fetch(t,{method:a?"PUT":"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":M.nonce},body:JSON.stringify(s)}),r=await n.json();r.success?(f("saved"),c(!1),!a&&r.data?.id&&(mn.getState().setTemplateId(r.data.id),window.history.replaceState(null,"",`${window.location.pathname}?page=f12-doi-email-editor&template_id=${r.data.id}`)),e&&r.data?.status&&o(r.data.status),setTimeout(()=>f("idle"),2e3)):(f("error"),console.error("Save error:",r),setTimeout(()=>f("idle"),3e3))}catch(e){console.error("Save error:",e),f("error"),setTimeout(()=>f("idle"),3e3)}finally{i(!1)}},[l,a,v,M,i,c,o]),I=(0,r.useCallback)(async()=>{if(C&&a){S("sending");try{const e=await fetch(`${M.restUrl}/${a}/send-test`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":M.nonce},body:JSON.stringify({email:C})});(await e.json()).success?(S("success"),setTimeout(()=>{x(!1),S("idle"),w("")},2e3)):(S("error"),setTimeout(()=>S("idle"),3e3))}catch{S("error"),setTimeout(()=>S("idle"),3e3)}}},[C,a,M]);return(0,r.createElement)("div",{className:"doi-toolbar"},(0,r.createElement)("div",{className:"doi-toolbar-left"},(0,r.createElement)("button",{onClick:()=>{s&&!window.confirm("You have unsaved changes. Are you sure you want to leave?")||(window.location.href=M.listUrl)},className:"doi-btn-icon",title:L.backToList||"Back to Templates"},(0,r.createElement)("svg",{className:"doi-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"}))),(0,r.createElement)("input",{type:"text",className:"doi-toolbar-title",value:e,onChange:e=>t(e.target.value),placeholder:L.untitledTemplate||"Untitled Template"}),s&&(0,r.createElement)("span",{className:"doi-status doi-status-dirty"},"Unsaved"),"saved"===b&&(0,r.createElement)("span",{className:"doi-status doi-status-saved"},L.saved||"Saved"),"error"===b&&(0,r.createElement)("span",{className:"doi-status",style:{backgroundColor:"#fee2e2",color:"#b91c1c"}},L.errorSaving||"Error saving")),(0,r.createElement)("div",{className:"doi-toolbar-center"},(0,r.createElement)("button",{onClick:g,disabled:!D,className:"doi-btn-icon",title:`${L.undo||"Undo"} (Ctrl+Z)`},(0,r.createElement)("svg",{className:"doi-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"}))),(0,r.createElement)("button",{onClick:h,disabled:!R,className:"doi-btn-icon",title:`${L.redo||"Redo"} (Ctrl+Shift+Z)`},(0,r.createElement)("svg",{className:"doi-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})))),(0,r.createElement)("div",{className:"doi-toolbar-right"},(0,r.createElement)("button",{onClick:()=>u(!d),className:"doi-btn doi-btn-secondary"},(0,r.createElement)("svg",{className:"doi-icon-sm doi-mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})),L.preview||"Preview"),a&&(0,r.createElement)("button",{onClick:()=>{M?.isProActive?x(!0):E(!0)},className:"doi-btn doi-btn-secondary"},(0,r.createElement)("svg",{className:"doi-icon-sm doi-mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),L.sendTest||"Send Test",!M?.isProActive&&(0,r.createElement)("span",{className:"doi-pro-badge",style:{position:"static",marginLeft:"4px"}},"PRO")),(0,r.createElement)("button",{onClick:()=>T(!1),disabled:l,className:"doi-btn doi-btn-secondary","data-action":"save"},l?L.saving||"Saving...":L.save||"Save Draft"),(0,r.createElement)("button",{onClick:()=>T(!0),disabled:l,className:"doi-btn doi-btn-primary"},"publish"===n?L.save||"Update":L.publish||"Publish")),y&&(0,r.createElement)(kn,{onClose:()=>E(!1)}),k&&(0,r.createElement)("div",{className:"doi-test-email-dialog",onClick:()=>x(!1)},(0,r.createElement)("div",{className:"doi-test-email-dialog-content",onClick:e=>e.stopPropagation()},(0,r.createElement)("h3",null,L.sendTestTitle||"Send Test Email"),(0,r.createElement)("p",null,L.sendTestDesc||"Send a test email to preview how your template looks in real email clients."),(0,r.createElement)("input",{type:"email",className:"doi-settings-input",placeholder:L.enterEmail||"Enter email address",value:C,onChange:e=>w(e.target.value),onKeyDown:e=>"Enter"===e.key&&I()}),(0,r.createElement)("div",{className:"doi-test-email-actions"},(0,r.createElement)("button",{onClick:I,disabled:"sending"===N||!C,className:"doi-btn doi-btn-primary"},"sending"===N?L.sending||"Sending...":"success"===N?L.sendTestSuccess||"Sent!":"error"===N?L.sendTestError||"Error":L.sendTest||"Send Test"),(0,r.createElement)("button",{onClick:()=>x(!1),className:"doi-btn doi-btn-secondary"},L.cancel||"Cancel")))))},Xn=({block:e})=>(0,r.createElement)("div",{className:"doi-block-preview"},(0,r.createElement)("div",{className:"doi-flex doi-items-center doi-gap-2"},(0,r.createElement)(Kn,{type:e.type}),(0,r.createElement)("span",{className:"doi-text-sm doi-font-medium"},{"email-wrapper":"Wrapper",row:"Row","columns-1":"1 Column","columns-2":"2 Columns","columns-2-sidebar":"2 Columns (Sidebar)","columns-3":"3 Columns",header:"Header",heading:"Heading",text:"Text",button:"Button",image:"Image",divider:"Divider",spacer:"Spacer","social-icons":"Social Icons",footer:"Footer","placeholder-confirm-link":"Confirmation Link","placeholder-optout-link":"Opt-out Link","placeholder-date":"Form Date","placeholder-time":"Form Time","placeholder-url":"Form URL","placeholder-custom":"Custom Field"}[e.type]||e.type))),Kn=({type:e})=>(0,r.createElement)("svg",{className:"doi-w-5 doi-h-5 doi-text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},(()=>{switch(e){case"email-wrapper":case"row":case"columns-1":case"columns-2":case"columns-2-sidebar":case"columns-3":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"});case"heading":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h8m-8 6h16"});case"text":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h7"});case"button":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"});case"image":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"});case"divider":return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 12H4"});default:return(0,r.createElement)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})}})()),Jn=({onSelect:e,onSkip:t})=>{const[n,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(!1),p=window.doiEmailEditor;(0,r.useEffect)(()=>{fetch(`${p?.restUrl}/presets`,{headers:{"X-WP-Nonce":p?.nonce||""}}).then(e=>e.json()).then(e=>{e.success&&e.data&&o(e.data),l(!1)}).catch(e=>{console.error("Failed to load presets:",e),l(!1)})},[p]);const g=e=>{switch(e){case"dark-professional":return"preset-thumb-dark";case"yellow-bold":return"preset-thumb-yellow";case"minimal-clean":return"preset-thumb-minimal";default:return"preset-thumb-blank"}};return a?(0,r.createElement)("div",{className:"doi-preset-selector"},(0,r.createElement)("div",{className:"doi-preset-loading"},(0,r.createElement)("span",{className:"spinner is-active"}),(0,r.createElement)("p",null,p?.i18n?.loading||"Loading templates..."))):(0,r.createElement)("div",{className:"doi-preset-selector"},(0,r.createElement)("div",{className:"doi-preset-header"},(0,r.createElement)("h2",null,p?.i18n?.chooseTemplate||"Choose a Template"),(0,r.createElement)("p",null,p?.i18n?.chooseTemplateDesc||"Select a starting point for your email template or start from scratch.")),(0,r.createElement)("div",{className:"doi-preset-grid"},n.map(e=>(0,r.createElement)("div",{key:e.id,className:"doi-preset-card "+(i===e.id?"selected":""),onClick:()=>s(e.id)},(0,r.createElement)("div",{className:`doi-preset-thumbnail ${g(e.thumbnail)}`},(0,r.createElement)("div",{className:"preset-preview"},"blank"===e.thumbnail&&(0,r.createElement)("div",{className:"preview-blank"},(0,r.createElement)("span",null,"+")),"dark-professional"===e.thumbnail&&(0,r.createElement)("div",{className:"preview-dark"},(0,r.createElement)("div",{className:"preview-header"}),(0,r.createElement)("div",{className:"preview-content"},(0,r.createElement)("div",{className:"preview-title"}),(0,r.createElement)("div",{className:"preview-text"}),(0,r.createElement)("div",{className:"preview-button"})),(0,r.createElement)("div",{className:"preview-footer"})),"yellow-bold"===e.thumbnail&&(0,r.createElement)("div",{className:"preview-yellow"},(0,r.createElement)("div",{className:"preview-topbar"}),(0,r.createElement)("div",{className:"preview-logo"}),(0,r.createElement)("div",{className:"preview-content"},(0,r.createElement)("div",{className:"preview-title"}),(0,r.createElement)("div",{className:"preview-text"}),(0,r.createElement)("div",{className:"preview-button"})),(0,r.createElement)("div",{className:"preview-footer"})),"minimal-clean"===e.thumbnail&&(0,r.createElement)("div",{className:"preview-minimal"},(0,r.createElement)("div",{className:"preview-card"},(0,r.createElement)("div",{className:"preview-text"}),(0,r.createElement)("div",{className:"preview-button"})),(0,r.createElement)("div",{className:"preview-footer"})))),(0,r.createElement)("div",{className:"doi-preset-info"},(0,r.createElement)("h3",null,e.name),(0,r.createElement)("p",null,e.description)),i===e.id&&(0,r.createElement)("div",{className:"doi-preset-selected-badge"},(0,r.createElement)("svg",{viewBox:"0 0 24 24",fill:"currentColor"},(0,r.createElement)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})))))),i&&(0,r.createElement)("div",{className:"doi-preset-form"},(0,r.createElement)("div",{className:"doi-preset-form-field"},(0,r.createElement)("label",{htmlFor:"template-title"},p?.i18n?.templateName||"Template Name"),(0,r.createElement)("input",{type:"text",id:"template-title",value:c,onChange:e=>d(e.target.value),placeholder:n.find(e=>e.id===i)?.name||"Untitled Template"}))),(0,r.createElement)("div",{className:"doi-preset-actions"},(0,r.createElement)("button",{className:"button button-secondary",onClick:t},p?.i18n?.startBlank||"Start Blank"),(0,r.createElement)("button",{className:"button button-primary",onClick:async()=>{if(i){m(!0);try{console.log("Creating template from preset:",i);const e=await fetch(`${p?.restUrl}/from-preset`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":p?.nonce||""},body:JSON.stringify({preset_id:i,title:c||void 0})}),t=await e.json();if(console.log("Server response:",t),console.log("DEBUG INFO:",t.data?._debug),t.success&&t.data){const e=`${p?.listUrl?.replace("f12-doi-email-templates","f12-doi-email-editor")}&template_id=${t.data.id}`;console.log("Redirecting to:",e),console.log("Template blocks_json:",t.data.blocks_json),window.location.href=e}else alert(t.message||"Failed to create template"),m(!1)}catch(e){console.error("Failed to create template:",e),alert("Failed to create template. Please try again."),m(!1)}}},disabled:!i||u},u?p?.i18n?.creating||"Creating...":p?.i18n?.createTemplate||"Create Template")))},qn=["email-wrapper","row"],Gn=["columns-1","columns-2","columns-2-sidebar","columns-3"],Zn=["email-wrapper","row",...Gn],Qn=e=>Zn.includes(e),er=e=>"email-wrapper"===e,tr=e=>Gn.includes(e),nr=()=>{const{loadTemplate:e,addBlock:t,blocks:n,setBlocks:o,selectedBlockId:a,selectBlock:l,setTemplateTitle:i,isDirty:s}=mn(),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[h,v]=(0,r.useState)(!1),b=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}((f=Ie,y={activationConstraint:{distance:8}},(0,r.useMemo)(()=>({sensor:f,options:null!=y?y:{}}),[f,y])));var f,y;(0,r.useEffect)(()=>{const t=window.doiEmailEditor,n=t?.templateId,r=t?.template&&t.template.id;console.log("Editor init:",{templateId:n,hasTemplate:r,template:t?.template}),r?(e(t.template),v(!0)):n&&n>0?fetch(`${t.restUrl}/${n}`,{headers:{"X-WP-Nonce":t.nonce}}).then(e=>e.json()).then(t=>{t.success&&t.data&&e(t.data),v(!0)}).catch(e=>{console.error(e),v(!0)}):(console.log("Showing preset selector"),g(!0),v(!0))},[e,i]);const E=(0,r.useCallback)((e,t)=>{},[]),k=(0,r.useCallback)(()=>{g(!1),i(window.doiEmailEditor?.i18n?.untitledTemplate||"Untitled Template")},[i]);(0,r.useEffect)(()=>{const e=e=>{const t=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;if(t&&"s"===e.key&&(e.preventDefault(),document.querySelector('[data-action="save"]')?.click()),t&&"z"===e.key&&(e.preventDefault(),e.shiftKey?mn.getState().redo():mn.getState().undo()),"Delete"===e.key||"Backspace"===e.key){const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;a&&(e.preventDefault(),mn.getState().deleteBlock(a))}"Escape"===e.key&&l(null)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,l]),(0,r.useEffect)(()=>{const e=e=>{s&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[s]);const x=(0,r.useCallback)((e,t)=>{for(const n of e){if(n.id===t)return n;if(n.children){const e=x(n.children,t);if(e)return e}}return null},[]),C=(0,r.useCallback)(e=>{const{active:t}=e;if(d(t.id),"library-block"===t.data.current?.type)m(t.data.current.block);else{const e=x(n,t.id);m(e)}},[n,x]),w=(0,r.useCallback)(e=>{const{active:r,over:a}=e;if(d(null),m(null),!a)return;const l=r.id,i=a.id,s=a.data.current;if("library-block"===r.data.current?.type){const e=r.data.current.block,o=e.type;if(!(e=>{const t=window.doiEmailEditor?.blockAvailability;return!t||!t[e]||t[e].available})(o))return void console.warn("Block requires Pro version:",o);if("column-drop-zone"===s?.type){const r=s.parentId,a=x(n,r),l=a?.type;if("email-wrapper"===l){if(er(o))return void console.warn("Cannot nest wrapper inside wrapper")}else if("row"===l){if(!tr(o))return void console.warn("Only column layout blocks can be placed inside rows")}else if(l&&tr(l)){if(Qn(o))return void console.warn("Only content blocks can be placed inside columns")}else if(Qn(o))return void console.warn("Only content blocks can be placed here");const c=i.match(/-col-(\d+)$/),d=c?parseInt(c[1],10):void 0,u=void 0!==d?{...e,attributes:{...e.attributes,_columnIndex:d}}:e;return void t(u,r)}if(c=o,!qn.includes(c))return void console.warn("Only Row and Wrapper blocks can be placed at root level");if("canvas-root"===i)t(e);else{const r=n.findIndex(e=>e.id===i);-1!==r?t(e,void 0,r+1):t(e)}return}var c;if(l!==i){const e=x(n,l);if(!e)return;if("column-drop-zone"===s?.type){const r=s.parentId,o=x(n,r),a=o?.type;if("email-wrapper"===a){if(er(e.type))return void console.warn("Cannot nest wrapper inside wrapper")}else if("row"===a){if(!tr(e.type))return void console.warn("Only column layout blocks can be placed inside rows")}else if(a&&tr(a)){if(Qn(e.type))return void console.warn("Only content blocks can be placed inside columns")}else if(Qn(e.type))return void console.warn("Only content blocks can be placed here");const c=i.match(/-col-(\d+)$/),d=c?parseInt(c[1],10):void 0;mn.getState().deleteBlock(l);const u=void 0!==d?{...e,id:"",attributes:{...e.attributes,_columnIndex:d}}:{...e,id:""};return void t(u,r)}const r=n.findIndex(e=>e.id===l),a=n.findIndex(e=>e.id===i);if(-1!==r&&-1!==a){const e=Dt(n,r,a);o(e)}}},[t,n,o,x]);return h?p?(0,r.createElement)(Jn,{onSelect:E,onSkip:k}):(0,r.createElement)(ut,{sensors:b,collisionDetection:Y,onDragStart:C,onDragEnd:w},(0,r.createElement)("div",{className:"doi-editor"},(0,r.createElement)(Yn,null),(0,r.createElement)("div",{className:"doi-editor-main"},(0,r.createElement)(Vn,null),(0,r.createElement)(xn,null))),(0,r.createElement)(Mt,{dropAnimation:null},u?(0,r.createElement)(Xn,{block:u}):null)):(0,r.createElement)("div",{className:"doi-editor-loading"},(0,r.createElement)("span",{className:"spinner is-active"}),(0,r.createElement)("p",null,window.doiEmailEditor?.i18n?.loading||"Loading..."))},rr=document.getElementById("doi-email-editor-root");var or;if(rr){const e=rr.querySelector(".doi-editor-loading");e&&e.remove(),(0,a.H)(rr).render((0,r.createElement)(nr,null))}})();